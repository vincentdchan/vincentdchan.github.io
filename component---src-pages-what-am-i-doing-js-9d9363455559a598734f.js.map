{"version":3,"sources":["webpack:///./node_modules/lodash-es/isObject.js","webpack:///./node_modules/lodash-es/_root.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/_Symbol.js","webpack:///./node_modules/lodash-es/_getRawTag.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/_baseGetTag.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./src/components/fullPage.js","webpack:///./src/components/brick/brickAtom.js","webpack:///./src/components/brick/ground.js","webpack:///./src/components/brick/largeBrick.js","webpack:///./src/components/brick/manOutline.js","webpack:///./src/components/brick/brickController.js","webpack:///./src/components/brick/brick.js","webpack:///./src/components/brick/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js","webpack:///./src/pages/what-am-i-doing.js","webpack:///./node_modules/poly-decomp/src/index.js","webpack:///./node_modules/lodash-es/_freeGlobal.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js"],"names":["value","type","freeSelf","self","Object","Function","Date","now","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","isOwn","call","tag","unmasked","e","result","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","replace","isBinary","test","slice","nativeMax","Math","max","nativeMin","min","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","this","clearTimeout","cancel","flush","FullPage","props","resetHeight","containerRef","current","style","height","window","innerHeight","debounceResetHeight","React","createRef","pageHeight","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","ref","className","children","Component","BrickAtom","x","y","body","Bodies","rectangle","width","density","frictionAir","friction","__img","Image","src","draw","ctx","position","angle","save","translate","rotate","drawImage","restore","dispose","Body","set","Ground","__width","__height","isStatic","frictionStatic","fillStyle","fillRect","decomp","LargeBrick","scale","fromVertices","__originalScale","isDragging","update","EndX","ratio","__scale","Width","Height","fillText","ManOutline","__x","__y","BrickController","dom","handleMouseMove","__largeBrick","mouse","newBrick","__bricks","push","__tmpBrick","resetLargeBrick","handleMouseUp","console","log","World","add","__engine","world","handleAfterUpdate","__dom","getContext","clearRect","CanvasWidth","CanvasHeight","forEach","brick","handleDragStart","handleDragEnd","__world","create","bounds","CanvasHeigh","Engine","__mouse","Mouse","__mouseConstraint","MouseConstraint","constraint","stiffness","visible","gravity","__ground","__lastTimeStamp","createGround","createBodies","setCanvasRatio","canvas","context","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","oldWidth","oldHeight","__ratio","i","count","j","atom","manOutline","loop","Events","on","run","remove","filter","concat","clear","err","error","Container","styled","div","Brick","resetSize","worldContainerRef","innerWidth","debounceResetSize","canvasRef","controller","strings","raw","Background","createGlobalStyle","WhatAmIDoing","lineInt","l1","l2","precision","a1","b1","c1","a2","b2","c2","det","scalar_eq","lineSegmentsIntersect","p1","p2","q1","q2","dx","dy","da","db","s","t","triangleArea","a","b","c","isLeft","isLeftOn","isRight","isRightOn","module","exports","polygon","edges","polygonGetCutEdges","tmp1","tmp2","tmpPoly","nDiags","Number","MAX_VALUE","length","polygonIsReflex","polygonCanSee","polygonCopy","k","polygonAt","polygonSlice","cutEdges","Array","polys","cutEdge","poly","splice","indexOf","quickDecomp","polygonQuickDecomp","reflexVertices","steinerPoints","delta","maxlevel","level","upperInt","lowerInt","p","upperDist","lowerDist","d","closestDist","upperIndex","lowerIndex","closestIndex","lowerPoly","upperPoly","v","warn","getIntersectionPoint","sqdist","polygonAppend","polygonCanSee2","isSimple","path","removeCollinearPoints","num","collinear","removeDuplicatePoints","pi","points_eq","makeCCW","br","tmp","N","pop","polygonReverse","tmpPoint1","tmpPoint2","thresholdAngle","ab","bc","dot","magA","sqrt","magB","acos","from","to","tmpLine1","tmpLine2","dist","targetPoly","polygonClear","abs","freeGlobal","global","_defineProperties","target","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","Constructor","protoProps","staticProps"],"mappings":"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","file":"component---src-pages-what-am-i-doing-js-9d9363455559a598734f.js","sourcesContent":["/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;","import freeGlobal from './_freeGlobal.js';\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\nexport default root;","import root from './_root.js';\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\nvar now = function now() {\n  return root.Date.now();\n};\n\nexport default now;","import root from './_root.js';\n/** Built-in value references. */\n\nvar Symbol = root.Symbol;\nexport default Symbol;","import Symbol from './_Symbol.js';\n/** Used for built-in method references. */\n\nvar objectProto = Object.prototype;\n/** Used to check objects for own properties. */\n\nvar hasOwnProperty = objectProto.hasOwnProperty;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString = objectProto.toString;\n/** Built-in value references. */\n\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\n\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n\n  return result;\n}\n\nexport default getRawTag;","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString = objectProto.toString;\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\n\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n/** `Object#toString` result references. */\n\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n/** Built-in value references. */\n\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\n\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n\n  return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\n}\n\nexport default baseGetTag;","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n/** `Object#toString` result references. */\n\nvar symbolTag = '[object Symbol]';\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;\n}\n\nexport default isSymbol;","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n/** Used as references for various `Number` constants. */\n\nvar NAN = 0 / 0;\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nexport default toNumber;","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n/** Error message constants. */\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber(wait) || 0;\n\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n    return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;","import React, { Component } from 'react';\nimport { debounce } from 'lodash-es';\n\nclass FullPage extends Component {\n\n  constructor(props) {\n    super(props);\n    this.containerRef = React.createRef();\n    if (typeof window !== 'undefined') {\n      this.pageHeight = window.innerHeight;\n    }\n  }\n\n  resetHeight = () => {\n    this.containerRef.current.style.height = window.innerHeight + 'px';\n  }\n\n  debounceResetHeight = debounce(this.resetHeight, 200, {\n    leading: true,\n  });\n\n  componentDidMount() {\n    window.addEventListener('resize', this.debounceResetHeight)\n    this.resetHeight();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debounceResetHeight);\n  }\n\n  render() {\n    return (\n      <div ref={this.containerRef} className=\"full-page\">\n        {this.props.children}\n      </div>\n    );\n  }\n\n}\n\nexport default FullPage;\n","import { Bodies, Body } from 'matter-js';\n\nexport class BrickAtom {\n\n  static width = 42;\n  static height = 24;\n\n  /**\n   * @param {number} x \n   * @param {number} y \n   */\n  constructor(x, y) {\n    this.body = Bodies.rectangle(\n      x,\n      y,\n      BrickAtom.width,\n      BrickAtom.height,\n      {\n        density: 10,\n        frictionAir: 0.035,\n        friction: 0.1,\n      },\n    );\n    this.__img = new Image();\n    this.__img.src = '/images/brick.png';\n  }\n\n  get position() {\n    return this.body.position;\n  }\n\n  set position({ x, y }) {\n    Body.set(this.body, {\n      position: { x, y },\n    });\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position, angle } = this.body;\n    ctx.save();\n    ctx.translate(position.x, position.y);\n    ctx.rotate(angle);\n    ctx.drawImage(\n      this.__img,\n      -1 * BrickAtom.width / 2,\n      -1 * BrickAtom.height / 2,\n      BrickAtom.width,\n      BrickAtom.height,\n    );\n    ctx.restore();\n  }\n\n  dispose() {\n  }\n\n}\n","import { Bodies } from 'matter-js';\n\nexport class Ground {\n\n  /**\n   * \n   * @param {number} x \n   * @param {number} y \n   * @param {number} width\n   * @param {number} height\n   */\n  constructor(x, y, width, height) {\n    this.__width = width;\n    this.__height = height;\n    this.body = Bodies.rectangle(\n      x, y,\n      width, height,\n      {\n        isStatic: true,\n        friction: 0.99,\n        frictionStatic: 0.99,\n      },\n    );\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position: { x, y } } = this.body;\n    ctx.save();\n    ctx.fillStyle = \"black\";\n    ctx.translate(x, y);\n    ctx.fillRect(-0.5 * this.__width, -this.__height * 0.5, this.__width, this.__height);\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Bodies, Body } from 'matter-js';\nimport decomp from 'poly-decomp';\n\nif (typeof window !== 'undefined') {\n  window.decomp = decomp;\n}\n\nexport class LargeBrick {\n\n  static Width = 512;\n  static Height = 512;\n  static EndX = 680;\n\n  /**\n   * \n   * @param {number} x \n   * @param {number} y \n   * @param {number} scale\n   */\n  constructor(x, y, scale = 0.5) {\n    this.body = Bodies.fromVertices(\n      x,\n      y,\n      [\n        { x: 306, y: 8.5 },\n        { x: 500, y: 75 },\n        { x: 505.5, y: 162.5 },\n        { x: 265.5, y: 500.5 },\n        { x: 14, y: 304 },\n        { x: 14, y: 240 },\n        { x: 306, y: 8.5 },\n      ],\n      {\n        density: 200,\n        frictionAir: 0.035,\n        friction: 0.78,\n      },\n    );\n    this.__originalScale = scale;\n    this.scale = scale;\n    this.__img = new Image();\n    this.__img.src = '/images/large-brick-rect.png';\n    this.isDragging = false;\n  }\n\n  get scale() {\n    return this.__scale;\n  }\n\n  set scale(value) {\n    this.__scale = value;\n    Body.scale(this.body, value, value);\n  }\n\n  update() {\n    const { position: { x } } = this.body;\n    if (x >= 200 && x < LargeBrick.EndX) {\n      const ratio = (LargeBrick.EndX - x) / (LargeBrick.EndX - 200);\n      // this.scale = this.__originalScale * ratio;\n      this.__scale = this.__originalScale * ratio;\n      // Body.scale(this.body, ratio / this.__originalScale, ratio / this.__originalScale);\n      // this.__originalScale = this.__originalScale * ratio;\n    } else {\n      // this.scale = this.__originalScale;\n    }\n      // this.scale = this.__originalScale;\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position, angle } = this.body;\n    ctx.save();\n    ctx.translate(position.x, position.y);\n    ctx.rotate(angle);\n    ctx.drawImage(\n      this.__img,\n      // 0, 0,\n      -1 * LargeBrick.Width / 2 * this.__scale,\n      -1 * LargeBrick.Height / 2 * this.__scale,\n      LargeBrick.Width * this.__scale,\n      LargeBrick.Height * this.__scale,\n    );\n    ctx.fillStyle =\"black\";\n    ctx.fillText(\n      `x: ${position.x} y: ${position.y}`,\n      -1 * LargeBrick.Width / 2 * this.__scale,\n      -1 * LargeBrick.Height / 2 * this.__scale,\n    )\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Bodies } from 'matter-js';\n\nexport class ManOutline {\n\n  static Width = 156;\n  static Height = 156;\n\n  constructor(x, y) {\n    this.__x = x;\n    this.__y = y;\n\n    this.body = Bodies.fromVertices(\n      x, y,\n      [\n        { x: 31.5, y: 34.5 },\n        { x: 81.5, y: 88 },\n        { x: 126.5, y: 47.5 },\n        { x: 97.5, y: 103.5 },\n        { x: 56.5, y: 103.5 }\n      ],\n      { isStatic: true },\n    )\n\n    this.__img = new Image();\n    this.__img.src = '/images/MAN.png';\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    ctx.save(0);\n    ctx.translate(this.__x, this.__y);\n    ctx.drawImage(\n      this.__img,\n      -1 * ManOutline.Width / 2 + 5,\n      -1 * ManOutline.Height / 2 - 10 ,\n      ManOutline.Width,\n      ManOutline.Height,\n    );\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Engine, World, Mouse, MouseConstraint, Events } from 'matter-js';\nimport { BrickAtom } from './brickAtom';\nimport { Ground } from './ground';\nimport { LargeBrick } from './largeBrick';\nimport { ManOutline } from './manOutline';\n\nexport class BrickController {\n\n  static CanvasWidth = 920;\n  static CanvasHeight = 480;\n\n  /**\n   * @param {HTMLCanvasElement} dom \n   */\n  constructor(dom) {\n    this.__dom = dom;\n    dom.width = BrickController.CanvasWidth;\n    dom.height = BrickController.CanvasHeight;\n    // this.setCanvasRatio(dom);\n    this.__world = World.create({\n      bounds: {\n        min: {\n          x: 0, y: 0,\n        },\n        max: {\n          x: BrickController.CanvasWidth,\n          y: BrickController.CanvasHeigh,\n        },\n      }\n    });\n\n    this.__engine = Engine.create({\n      world: this.__world,\n    });\n\n    // this.__render = Render.create({\n    //   canvas: this.__dom,\n    //   engine: this.__engine,\n    //   options: {\n    //     width: BrickController.CanvasWidth,\n    //     height: BrickController.CanvasHeight,\n    //     // showAxes: true,\n    //     // showAngleIndicator:true\n    //   },\n    // });\n\n    this.__mouse = Mouse.create(this.__dom);\n    this.__mouseConstraint = MouseConstraint.create(this.__engine, {\n      mouse: this.__mouse,\n      constraint: {\n        stiffness: 0.2,\n        render: {\n            visible: false,\n        },\n      },\n    });\n\n    World.add(this.__engine.world, this.__mouseConstraint);\n\n    this.__engine.world.gravity.y = 1;\n\n    this.__bricks = [];\n    this.__ground = null;\n    this.__lastTimeStamp = null;\n    this.createGround();\n    this.createBodies();\n    this.resetLargeBrick();\n  }\n\n  /**\n   * \n   * @param {HTMLCanvasElement} dom \n   */\n  setCanvasRatio(canvas) {\n    const context = canvas.getContext('2d');\n    var devicePixelRatio = window.devicePixelRatio || 1\n    const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1\n    const ratio = devicePixelRatio / backingStoreRatio;\n\n    const oldWidth = canvas.width;\n    const oldHeight = canvas.height;\n    canvas.width = oldWidth * ratio;\n    canvas.height = oldHeight * ratio;\n    canvas.style.width = oldWidth + 'px';\n    canvas.style.height = oldHeight + 'px';\n    context.scale(this.__ratio * 2, this.__ratio * 2);\n    this.__ratio = ratio;\n  }\n\n  createGround() {\n    this.__ground = new Ground(\n      480, 420,\n      BrickController.CanvasWidth, 10,\n    );\n    this.__bricks.push(this.__ground);\n    // World.add(this.__engine.world, this.__ground.body);\n  }\n\n  createBodies() {\n    const beginX = 620;\n    const beginY = 400;\n\n    for (let i = 0; i < 4; i++) {\n      const count = 5 - i;\n      for (let j = 0; j < count; j++) {\n        const atom = new BrickAtom(beginX + BrickAtom.width * (j + i/2), beginY - BrickAtom.height * i);\n        this.__bricks.push(atom);\n      }\n    }\n\n    const manOutline = new ManOutline(110, 348);\n    this.__bricks.push(manOutline);\n\n    this.__bricks.forEach(brick => {\n      World.add(this.__engine.world, brick.body);\n    });\n  }\n\n  loop() {\n    // window.requestAnimationFrame(this.draw);\n    // Events.on(this.__render, \"afterRender\", this.handleAfterRender);\n    Events.on(this.__engine, \"afterUpdate\", this.handleAfterUpdate);\n    Events.on(this.__mouseConstraint, \"mousemove\", this.handleMouseMove);\n    Events.on(this.__mouseConstraint, \"mouseup\", this.handleMouseUp);\n    Events.on(this.__mouseConstraint, \"startdrag\", this.handleDragStart);\n    Events.on(this.__mouseConstraint, \"enddrag\", this.handleDragEnd);\n    Engine.run(this.__engine);\n    // Render.run(this.__render);\n  }\n\n  handleMouseMove = e => {\n    if (this.__largeBrick && this.__largeBrick.isDragging) {\n      const { position: { x, y } } = e.mouse;\n      if (x > LargeBrick.EndX - 120) {\n        const newBrick = new BrickAtom(x, y);\n        this.__bricks.push(newBrick);\n        this.__tmpBrick = newBrick;\n\n        this.resetLargeBrick();\n      }\n    }\n\n    if (this.__tmpBrick) {\n      const { position } = e.mouse;\n      this.__tmpBrick = position;\n    }\n  }\n\n  handleMouseUp = e => {\n    console.log(e);\n    if (this.__tmpBrick) {\n      World.add(this.__engine.world, this.__tmpBrick.body);\n    }\n  }\n\n  handleAfterUpdate = () => {\n    this.__largeBrick.update();\n\n    /** @type {CanvasRenderingContext2D} */\n    const ctx = this.__dom.getContext('2d');\n\n    ctx.clearRect(0, 0, BrickAtom.width, BrickAtom.height);\n    ctx.fillStyle = \"#FFF3DE\";\n    ctx.fillRect(0, 0, BrickController.CanvasWidth, BrickController.CanvasHeight);\n    // this.__ground.draw(ctx);\n    this.__bricks.forEach(brick => brick.draw(ctx));\n  }\n\n  handleDragStart = e => {\n    if (this.__largeBrick && e.body === this.__largeBrick.body) {\n      this.__largeBrick.isDragging = true;\n    }\n  }\n\n  handleDragEnd = e => {\n    if (this.__largeBrick && e.body === this.__largeBrick.body) {\n      this.resetLargeBrick();\n    }\n  }\n\n  resetLargeBrick() {\n    if (this.__largeBrick) {\n      this.__largeBrick.dispose();\n      World.remove(this.__engine.world, this.__largeBrick.body);\n      this.__bricks = this.__bricks.filter(brick => brick !== this.__largeBrick);\n    }\n\n    this.__largeBrick = new LargeBrick(120, 30);\n    World.add(this.__engine.world, this.__largeBrick.body);\n    this.__bricks = [this.__largeBrick].concat(this.__bricks);\n  }\n\n  // draw = timestamp => {\n  //   if (!this.__lastTimeStamp) {\n  //     this.__lastTimeStamp = timestamp;\n  //   }\n  //   const delta = timestamp - this.__lastTimeStamp;\n  //   this.__lastTimeStamp = timestamp;\n\n  //   // do something\n  //   Engine.update(this.__engine, delta);\n\n  //   const ctx = this.__dom.getContext('2d');\n  //   ctx.clearRect(0, 0, BrickAtom.width, BrickAtom.height);\n  //   this.__bricks.forEach(brick => brick.draw(ctx));\n\n  //   window.requestAnimationFrame(this.draw)\n  // }\n\n  dispose() {\n    // Render.stop(this.__render);\n    Engine.clear(this.__engine);\n    this.__bricks.forEach(brick => {\n      try {\n        brick.dispose();\n      } catch (err) {\n        console.error(err);\n      }\n    });\n    // window.cancelAnimationFrame(this.draw);\n  }\n\n}\n","import React, { Component } from 'react';\nimport { BrickController } from './brickController';\nimport { debounce } from 'lodash-es';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nclass Brick extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.worldContainerRef = React.createRef();\n    this.canvasRef = React.createRef();\n    this.controller = null;\n  }\n\n  componentDidMount() {\n    this.controller = new BrickController(this.canvasRef.current);\n    this.resetSize();\n    this.controller.loop();\n    window.addEventListener('resize', this.debounceResetSize);\n  }\n\n  resetSize = () => {\n    this.worldContainerRef.current.style.width = window.innerWidth + 'px';\n    this.worldContainerRef.current.style.height = window.innerHeight + 'px';\n  }\n\n  debounceResetSize = debounce(this.resetSize, 200, {\n    leading: true,\n  });\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debounceResetSize);\n    \n    if (this.controller) {\n      this.controller.dispose();\n      this.controller = null;\n    }\n  }\n\n  render() {\n    return (\n      <Container\n        ref={this.worldContainerRef}\n        className=\"brick-world\"\n      >\n        <canvas ref={this.canvasRef} />\n      </Container>\n    );\n  }\n\n}\n\nexport default Brick;\n","import Brick from './brick';\n\nexport default Brick;\n","export default function _taggedTemplateLiteralLoose(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  strings.raw = raw;\n  return strings;\n}","import React, { Fragment } from 'react';\nimport { createGlobalStyle } from 'styled-components';\nimport FullPage from '../components/fullPage';\nimport Brick from '../components/brick';\n\nconst Background = createGlobalStyle`\n  body {\n    background-color: #FFF3DE;\n  }\n\n  .full-page {\n    overflow: hidden;\n  }\n`;\n\nconst WhatAmIDoing = () => {\n  return (\n    <Fragment>\n      <Background />\n      <FullPage>\n        Chen Duzhong \n      </FullPage>\n      <FullPage>\n        {/*  */}\n        <Brick />\n      </FullPage>\n    </Fragment>\n  )\n};\n\nexport default WhatAmIDoing;\n","module.exports = {\n  decomp: polygonDecomp,\n  quickDecomp: polygonQuickDecomp,\n  isSimple: polygonIsSimple,\n  removeCollinearPoints: polygonRemoveCollinearPoints,\n  removeDuplicatePoints: polygonRemoveDuplicatePoints,\n  makeCCW: polygonMakeCCW\n};\n/**\n * Compute the intersection between two lines.\n * @static\n * @method lineInt\n * @param  {Array}  l1          Line vector 1\n * @param  {Array}  l2          Line vector 2\n * @param  {Number} precision   Precision to use when checking if the lines are parallel\n * @return {Array}              The intersection point.\n */\n\nfunction lineInt(l1, l2, precision) {\n  precision = precision || 0;\n  var i = [0, 0]; // point\n\n  var a1, b1, c1, a2, b2, c2, det; // scalars\n\n  a1 = l1[1][1] - l1[0][1];\n  b1 = l1[0][0] - l1[1][0];\n  c1 = a1 * l1[0][0] + b1 * l1[0][1];\n  a2 = l2[1][1] - l2[0][1];\n  b2 = l2[0][0] - l2[1][0];\n  c2 = a2 * l2[0][0] + b2 * l2[0][1];\n  det = a1 * b2 - a2 * b1;\n\n  if (!scalar_eq(det, 0, precision)) {\n    // lines are not parallel\n    i[0] = (b2 * c1 - b1 * c2) / det;\n    i[1] = (a1 * c2 - a2 * c1) / det;\n  }\n\n  return i;\n}\n/**\n * Checks if two line segments intersects.\n * @method segmentsIntersect\n * @param {Array} p1 The start vertex of the first line segment.\n * @param {Array} p2 The end vertex of the first line segment.\n * @param {Array} q1 The start vertex of the second line segment.\n * @param {Array} q2 The end vertex of the second line segment.\n * @return {Boolean} True if the two line segments intersect\n */\n\n\nfunction lineSegmentsIntersect(p1, p2, q1, q2) {\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var da = q2[0] - q1[0];\n  var db = q2[1] - q1[1]; // segments are parallel\n\n  if (da * dy - db * dx === 0) {\n    return false;\n  }\n\n  var s = (dx * (q1[1] - p1[1]) + dy * (p1[0] - q1[0])) / (da * dy - db * dx);\n  var t = (da * (p1[1] - q1[1]) + db * (q1[0] - p1[0])) / (db * dx - da * dy);\n  return s >= 0 && s <= 1 && t >= 0 && t <= 1;\n}\n/**\n * Get the area of a triangle spanned by the three given points. Note that the area will be negative if the points are not given in counter-clockwise order.\n * @static\n * @method area\n * @param  {Array} a\n * @param  {Array} b\n * @param  {Array} c\n * @return {Number}\n */\n\n\nfunction triangleArea(a, b, c) {\n  return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]);\n}\n\nfunction isLeft(a, b, c) {\n  return triangleArea(a, b, c) > 0;\n}\n\nfunction isLeftOn(a, b, c) {\n  return triangleArea(a, b, c) >= 0;\n}\n\nfunction isRight(a, b, c) {\n  return triangleArea(a, b, c) < 0;\n}\n\nfunction isRightOn(a, b, c) {\n  return triangleArea(a, b, c) <= 0;\n}\n\nvar tmpPoint1 = [],\n    tmpPoint2 = [];\n/**\n * Check if three points are collinear\n * @method collinear\n * @param  {Array} a\n * @param  {Array} b\n * @param  {Array} c\n * @param  {Number} [thresholdAngle=0] Threshold angle to use when comparing the vectors. The function will return true if the angle between the resulting vectors is less than this value. Use zero for max precision.\n * @return {Boolean}\n */\n\nfunction collinear(a, b, c, thresholdAngle) {\n  if (!thresholdAngle) {\n    return triangleArea(a, b, c) === 0;\n  } else {\n    var ab = tmpPoint1,\n        bc = tmpPoint2;\n    ab[0] = b[0] - a[0];\n    ab[1] = b[1] - a[1];\n    bc[0] = c[0] - b[0];\n    bc[1] = c[1] - b[1];\n    var dot = ab[0] * bc[0] + ab[1] * bc[1],\n        magA = Math.sqrt(ab[0] * ab[0] + ab[1] * ab[1]),\n        magB = Math.sqrt(bc[0] * bc[0] + bc[1] * bc[1]),\n        angle = Math.acos(dot / (magA * magB));\n    return angle < thresholdAngle;\n  }\n}\n\nfunction sqdist(a, b) {\n  var dx = b[0] - a[0];\n  var dy = b[1] - a[1];\n  return dx * dx + dy * dy;\n}\n/**\n * Get a vertex at position i. It does not matter if i is out of bounds, this function will just cycle.\n * @method at\n * @param  {Number} i\n * @return {Array}\n */\n\n\nfunction polygonAt(polygon, i) {\n  var s = polygon.length;\n  return polygon[i < 0 ? i % s + s : i % s];\n}\n/**\n * Clear the polygon data\n * @method clear\n * @return {Array}\n */\n\n\nfunction polygonClear(polygon) {\n  polygon.length = 0;\n}\n/**\n * Append points \"from\" to \"to\"-1 from an other polygon \"poly\" onto this one.\n * @method append\n * @param {Polygon} poly The polygon to get points from.\n * @param {Number}  from The vertex index in \"poly\".\n * @param {Number}  to The end vertex index in \"poly\". Note that this vertex is NOT included when appending.\n * @return {Array}\n */\n\n\nfunction polygonAppend(polygon, poly, from, to) {\n  for (var i = from; i < to; i++) {\n    polygon.push(poly[i]);\n  }\n}\n/**\n * Make sure that the polygon vertices are ordered counter-clockwise.\n * @method makeCCW\n */\n\n\nfunction polygonMakeCCW(polygon) {\n  var br = 0,\n      v = polygon; // find bottom right point\n\n  for (var i = 1; i < polygon.length; ++i) {\n    if (v[i][1] < v[br][1] || v[i][1] === v[br][1] && v[i][0] > v[br][0]) {\n      br = i;\n    }\n  } // reverse poly if clockwise\n\n\n  if (!isLeft(polygonAt(polygon, br - 1), polygonAt(polygon, br), polygonAt(polygon, br + 1))) {\n    polygonReverse(polygon);\n    return true;\n  } else {\n    return false;\n  }\n}\n/**\n * Reverse the vertices in the polygon\n * @method reverse\n */\n\n\nfunction polygonReverse(polygon) {\n  var tmp = [];\n  var N = polygon.length;\n\n  for (var i = 0; i !== N; i++) {\n    tmp.push(polygon.pop());\n  }\n\n  for (var i = 0; i !== N; i++) {\n    polygon[i] = tmp[i];\n  }\n}\n/**\n * Check if a point in the polygon is a reflex point\n * @method isReflex\n * @param  {Number}  i\n * @return {Boolean}\n */\n\n\nfunction polygonIsReflex(polygon, i) {\n  return isRight(polygonAt(polygon, i - 1), polygonAt(polygon, i), polygonAt(polygon, i + 1));\n}\n\nvar tmpLine1 = [],\n    tmpLine2 = [];\n/**\n * Check if two vertices in the polygon can see each other\n * @method canSee\n * @param  {Number} a Vertex index 1\n * @param  {Number} b Vertex index 2\n * @return {Boolean}\n */\n\nfunction polygonCanSee(polygon, a, b) {\n  var p,\n      dist,\n      l1 = tmpLine1,\n      l2 = tmpLine2;\n\n  if (isLeftOn(polygonAt(polygon, a + 1), polygonAt(polygon, a), polygonAt(polygon, b)) && isRightOn(polygonAt(polygon, a - 1), polygonAt(polygon, a), polygonAt(polygon, b))) {\n    return false;\n  }\n\n  dist = sqdist(polygonAt(polygon, a), polygonAt(polygon, b));\n\n  for (var i = 0; i !== polygon.length; ++i) {\n    // for each edge\n    if ((i + 1) % polygon.length === a || i === a) {\n      // ignore incident edges\n      continue;\n    }\n\n    if (isLeftOn(polygonAt(polygon, a), polygonAt(polygon, b), polygonAt(polygon, i + 1)) && isRightOn(polygonAt(polygon, a), polygonAt(polygon, b), polygonAt(polygon, i))) {\n      // if diag intersects an edge\n      l1[0] = polygonAt(polygon, a);\n      l1[1] = polygonAt(polygon, b);\n      l2[0] = polygonAt(polygon, i);\n      l2[1] = polygonAt(polygon, i + 1);\n      p = lineInt(l1, l2);\n\n      if (sqdist(polygonAt(polygon, a), p) < dist) {\n        // if edge is blocking visibility to b\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n/**\n * Check if two vertices in the polygon can see each other\n * @method canSee2\n * @param  {Number} a Vertex index 1\n * @param  {Number} b Vertex index 2\n * @return {Boolean}\n */\n\n\nfunction polygonCanSee2(polygon, a, b) {\n  // for each edge\n  for (var i = 0; i !== polygon.length; ++i) {\n    // ignore incident edges\n    if (i === a || i === b || (i + 1) % polygon.length === a || (i + 1) % polygon.length === b) {\n      continue;\n    }\n\n    if (lineSegmentsIntersect(polygonAt(polygon, a), polygonAt(polygon, b), polygonAt(polygon, i), polygonAt(polygon, i + 1))) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * Copy the polygon from vertex i to vertex j.\n * @method copy\n * @param  {Number} i\n * @param  {Number} j\n * @param  {Polygon} [targetPoly]   Optional target polygon to save in.\n * @return {Polygon}                The resulting copy.\n */\n\n\nfunction polygonCopy(polygon, i, j, targetPoly) {\n  var p = targetPoly || [];\n  polygonClear(p);\n\n  if (i < j) {\n    // Insert all vertices from i to j\n    for (var k = i; k <= j; k++) {\n      p.push(polygon[k]);\n    }\n  } else {\n    // Insert vertices 0 to j\n    for (var k = 0; k <= j; k++) {\n      p.push(polygon[k]);\n    } // Insert vertices i to end\n\n\n    for (var k = i; k < polygon.length; k++) {\n      p.push(polygon[k]);\n    }\n  }\n\n  return p;\n}\n/**\n * Decomposes the polygon into convex pieces. Returns a list of edges [[p1,p2],[p2,p3],...] that cuts the polygon.\n * Note that this algorithm has complexity O(N^4) and will be very slow for polygons with many vertices.\n * @method getCutEdges\n * @return {Array}\n */\n\n\nfunction polygonGetCutEdges(polygon) {\n  var min = [],\n      tmp1 = [],\n      tmp2 = [],\n      tmpPoly = [];\n  var nDiags = Number.MAX_VALUE;\n\n  for (var i = 0; i < polygon.length; ++i) {\n    if (polygonIsReflex(polygon, i)) {\n      for (var j = 0; j < polygon.length; ++j) {\n        if (polygonCanSee(polygon, i, j)) {\n          tmp1 = polygonGetCutEdges(polygonCopy(polygon, i, j, tmpPoly));\n          tmp2 = polygonGetCutEdges(polygonCopy(polygon, j, i, tmpPoly));\n\n          for (var k = 0; k < tmp2.length; k++) {\n            tmp1.push(tmp2[k]);\n          }\n\n          if (tmp1.length < nDiags) {\n            min = tmp1;\n            nDiags = tmp1.length;\n            min.push([polygonAt(polygon, i), polygonAt(polygon, j)]);\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}\n/**\n * Decomposes the polygon into one or more convex sub-Polygons.\n * @method decomp\n * @return {Array} An array or Polygon objects.\n */\n\n\nfunction polygonDecomp(polygon) {\n  var edges = polygonGetCutEdges(polygon);\n\n  if (edges.length > 0) {\n    return polygonSlice(polygon, edges);\n  } else {\n    return [polygon];\n  }\n}\n/**\n * Slices the polygon given one or more cut edges. If given one, this function will return two polygons (false on failure). If many, an array of polygons.\n * @method slice\n * @param {Array} cutEdges A list of edges, as returned by .getCutEdges()\n * @return {Array}\n */\n\n\nfunction polygonSlice(polygon, cutEdges) {\n  if (cutEdges.length === 0) {\n    return [polygon];\n  }\n\n  if (cutEdges instanceof Array && cutEdges.length && cutEdges[0] instanceof Array && cutEdges[0].length === 2 && cutEdges[0][0] instanceof Array) {\n    var polys = [polygon];\n\n    for (var i = 0; i < cutEdges.length; i++) {\n      var cutEdge = cutEdges[i]; // Cut all polys\n\n      for (var j = 0; j < polys.length; j++) {\n        var poly = polys[j];\n        var result = polygonSlice(poly, cutEdge);\n\n        if (result) {\n          // Found poly! Cut and quit\n          polys.splice(j, 1);\n          polys.push(result[0], result[1]);\n          break;\n        }\n      }\n    }\n\n    return polys;\n  } else {\n    // Was given one edge\n    var cutEdge = cutEdges;\n    var i = polygon.indexOf(cutEdge[0]);\n    var j = polygon.indexOf(cutEdge[1]);\n\n    if (i !== -1 && j !== -1) {\n      return [polygonCopy(polygon, i, j), polygonCopy(polygon, j, i)];\n    } else {\n      return false;\n    }\n  }\n}\n/**\n * Checks that the line segments of this polygon do not intersect each other.\n * @method isSimple\n * @param  {Array} path An array of vertices e.g. [[0,0],[0,1],...]\n * @return {Boolean}\n * @todo Should it check all segments with all others?\n */\n\n\nfunction polygonIsSimple(polygon) {\n  var path = polygon,\n      i; // Check\n\n  for (i = 0; i < path.length - 1; i++) {\n    for (var j = 0; j < i - 1; j++) {\n      if (lineSegmentsIntersect(path[i], path[i + 1], path[j], path[j + 1])) {\n        return false;\n      }\n    }\n  } // Check the segment between the last and the first point to all others\n\n\n  for (i = 1; i < path.length - 2; i++) {\n    if (lineSegmentsIntersect(path[0], path[path.length - 1], path[i], path[i + 1])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getIntersectionPoint(p1, p2, q1, q2, delta) {\n  delta = delta || 0;\n  var a1 = p2[1] - p1[1];\n  var b1 = p1[0] - p2[0];\n  var c1 = a1 * p1[0] + b1 * p1[1];\n  var a2 = q2[1] - q1[1];\n  var b2 = q1[0] - q2[0];\n  var c2 = a2 * q1[0] + b2 * q1[1];\n  var det = a1 * b2 - a2 * b1;\n\n  if (!scalar_eq(det, 0, delta)) {\n    return [(b2 * c1 - b1 * c2) / det, (a1 * c2 - a2 * c1) / det];\n  } else {\n    return [0, 0];\n  }\n}\n/**\n * Quickly decompose the Polygon into convex sub-polygons.\n * @method quickDecomp\n * @param  {Array} result\n * @param  {Array} [reflexVertices]\n * @param  {Array} [steinerPoints]\n * @param  {Number} [delta]\n * @param  {Number} [maxlevel]\n * @param  {Number} [level]\n * @return {Array}\n */\n\n\nfunction polygonQuickDecomp(polygon, result, reflexVertices, steinerPoints, delta, maxlevel, level) {\n  maxlevel = maxlevel || 100;\n  level = level || 0;\n  delta = delta || 25;\n  result = typeof result !== \"undefined\" ? result : [];\n  reflexVertices = reflexVertices || [];\n  steinerPoints = steinerPoints || [];\n  var upperInt = [0, 0],\n      lowerInt = [0, 0],\n      p = [0, 0]; // Points\n\n  var upperDist = 0,\n      lowerDist = 0,\n      d = 0,\n      closestDist = 0; // scalars\n\n  var upperIndex = 0,\n      lowerIndex = 0,\n      closestIndex = 0; // Integers\n\n  var lowerPoly = [],\n      upperPoly = []; // polygons\n\n  var poly = polygon,\n      v = polygon;\n\n  if (v.length < 3) {\n    return result;\n  }\n\n  level++;\n\n  if (level > maxlevel) {\n    console.warn(\"quickDecomp: max level (\" + maxlevel + \") reached.\");\n    return result;\n  }\n\n  for (var i = 0; i < polygon.length; ++i) {\n    if (polygonIsReflex(poly, i)) {\n      reflexVertices.push(poly[i]);\n      upperDist = lowerDist = Number.MAX_VALUE;\n\n      for (var j = 0; j < polygon.length; ++j) {\n        if (isLeft(polygonAt(poly, i - 1), polygonAt(poly, i), polygonAt(poly, j)) && isRightOn(polygonAt(poly, i - 1), polygonAt(poly, i), polygonAt(poly, j - 1))) {\n          // if line intersects with an edge\n          p = getIntersectionPoint(polygonAt(poly, i - 1), polygonAt(poly, i), polygonAt(poly, j), polygonAt(poly, j - 1)); // find the point of intersection\n\n          if (isRight(polygonAt(poly, i + 1), polygonAt(poly, i), p)) {\n            // make sure it's inside the poly\n            d = sqdist(poly[i], p);\n\n            if (d < lowerDist) {\n              // keep only the closest intersection\n              lowerDist = d;\n              lowerInt = p;\n              lowerIndex = j;\n            }\n          }\n        }\n\n        if (isLeft(polygonAt(poly, i + 1), polygonAt(poly, i), polygonAt(poly, j + 1)) && isRightOn(polygonAt(poly, i + 1), polygonAt(poly, i), polygonAt(poly, j))) {\n          p = getIntersectionPoint(polygonAt(poly, i + 1), polygonAt(poly, i), polygonAt(poly, j), polygonAt(poly, j + 1));\n\n          if (isLeft(polygonAt(poly, i - 1), polygonAt(poly, i), p)) {\n            d = sqdist(poly[i], p);\n\n            if (d < upperDist) {\n              upperDist = d;\n              upperInt = p;\n              upperIndex = j;\n            }\n          }\n        }\n      } // if there are no vertices to connect to, choose a point in the middle\n\n\n      if (lowerIndex === (upperIndex + 1) % polygon.length) {\n        //console.log(\"Case 1: Vertex(\"+i+\"), lowerIndex(\"+lowerIndex+\"), upperIndex(\"+upperIndex+\"), poly.size(\"+polygon.length+\")\");\n        p[0] = (lowerInt[0] + upperInt[0]) / 2;\n        p[1] = (lowerInt[1] + upperInt[1]) / 2;\n        steinerPoints.push(p);\n\n        if (i < upperIndex) {\n          //lowerPoly.insert(lowerPoly.end(), poly.begin() + i, poly.begin() + upperIndex + 1);\n          polygonAppend(lowerPoly, poly, i, upperIndex + 1);\n          lowerPoly.push(p);\n          upperPoly.push(p);\n\n          if (lowerIndex !== 0) {\n            //upperPoly.insert(upperPoly.end(), poly.begin() + lowerIndex, poly.end());\n            polygonAppend(upperPoly, poly, lowerIndex, poly.length);\n          } //upperPoly.insert(upperPoly.end(), poly.begin(), poly.begin() + i + 1);\n\n\n          polygonAppend(upperPoly, poly, 0, i + 1);\n        } else {\n          if (i !== 0) {\n            //lowerPoly.insert(lowerPoly.end(), poly.begin() + i, poly.end());\n            polygonAppend(lowerPoly, poly, i, poly.length);\n          } //lowerPoly.insert(lowerPoly.end(), poly.begin(), poly.begin() + upperIndex + 1);\n\n\n          polygonAppend(lowerPoly, poly, 0, upperIndex + 1);\n          lowerPoly.push(p);\n          upperPoly.push(p); //upperPoly.insert(upperPoly.end(), poly.begin() + lowerIndex, poly.begin() + i + 1);\n\n          polygonAppend(upperPoly, poly, lowerIndex, i + 1);\n        }\n      } else {\n        // connect to the closest point within the triangle\n        //console.log(\"Case 2: Vertex(\"+i+\"), closestIndex(\"+closestIndex+\"), poly.size(\"+polygon.length+\")\\n\");\n        if (lowerIndex > upperIndex) {\n          upperIndex += polygon.length;\n        }\n\n        closestDist = Number.MAX_VALUE;\n\n        if (upperIndex < lowerIndex) {\n          return result;\n        }\n\n        for (var j = lowerIndex; j <= upperIndex; ++j) {\n          if (isLeftOn(polygonAt(poly, i - 1), polygonAt(poly, i), polygonAt(poly, j)) && isRightOn(polygonAt(poly, i + 1), polygonAt(poly, i), polygonAt(poly, j))) {\n            d = sqdist(polygonAt(poly, i), polygonAt(poly, j));\n\n            if (d < closestDist && polygonCanSee2(poly, i, j)) {\n              closestDist = d;\n              closestIndex = j % polygon.length;\n            }\n          }\n        }\n\n        if (i < closestIndex) {\n          polygonAppend(lowerPoly, poly, i, closestIndex + 1);\n\n          if (closestIndex !== 0) {\n            polygonAppend(upperPoly, poly, closestIndex, v.length);\n          }\n\n          polygonAppend(upperPoly, poly, 0, i + 1);\n        } else {\n          if (i !== 0) {\n            polygonAppend(lowerPoly, poly, i, v.length);\n          }\n\n          polygonAppend(lowerPoly, poly, 0, closestIndex + 1);\n          polygonAppend(upperPoly, poly, closestIndex, i + 1);\n        }\n      } // solve smallest poly first\n\n\n      if (lowerPoly.length < upperPoly.length) {\n        polygonQuickDecomp(lowerPoly, result, reflexVertices, steinerPoints, delta, maxlevel, level);\n        polygonQuickDecomp(upperPoly, result, reflexVertices, steinerPoints, delta, maxlevel, level);\n      } else {\n        polygonQuickDecomp(upperPoly, result, reflexVertices, steinerPoints, delta, maxlevel, level);\n        polygonQuickDecomp(lowerPoly, result, reflexVertices, steinerPoints, delta, maxlevel, level);\n      }\n\n      return result;\n    }\n  }\n\n  result.push(polygon);\n  return result;\n}\n/**\n * Remove collinear points in the polygon.\n * @method removeCollinearPoints\n * @param  {Number} [precision] The threshold angle to use when determining whether two edges are collinear. Use zero for finest precision.\n * @return {Number}           The number of points removed\n */\n\n\nfunction polygonRemoveCollinearPoints(polygon, precision) {\n  var num = 0;\n\n  for (var i = polygon.length - 1; polygon.length > 3 && i >= 0; --i) {\n    if (collinear(polygonAt(polygon, i - 1), polygonAt(polygon, i), polygonAt(polygon, i + 1), precision)) {\n      // Remove the middle point\n      polygon.splice(i % polygon.length, 1);\n      num++;\n    }\n  }\n\n  return num;\n}\n/**\n * Remove duplicate points in the polygon.\n * @method removeDuplicatePoints\n * @param  {Number} [precision] The threshold to use when determining whether two points are the same. Use zero for best precision.\n */\n\n\nfunction polygonRemoveDuplicatePoints(polygon, precision) {\n  for (var i = polygon.length - 1; i >= 1; --i) {\n    var pi = polygon[i];\n\n    for (var j = i - 1; j >= 0; --j) {\n      if (points_eq(pi, polygon[j], precision)) {\n        polygon.splice(i, 1);\n        continue;\n      }\n    }\n  }\n}\n/**\n * Check if two scalars are equal\n * @static\n * @method eq\n * @param  {Number} a\n * @param  {Number} b\n * @param  {Number} [precision]\n * @return {Boolean}\n */\n\n\nfunction scalar_eq(a, b, precision) {\n  precision = precision || 0;\n  return Math.abs(a - b) <= precision;\n}\n/**\n * Check if two points are equal\n * @static\n * @method points_eq\n * @param  {Array} a\n * @param  {Array} b\n * @param  {Number} [precision]\n * @return {Boolean}\n */\n\n\nfunction points_eq(a, b, precision) {\n  return scalar_eq(a[0], b[0], precision) && scalar_eq(a[1], b[1], precision);\n}","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\nexport default freeGlobal;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}"],"sourceRoot":""}