{"version":3,"sources":["webpack:///./src/components/fullPage.js","webpack:///./src/components/brick/brickAtom.js","webpack:///./src/components/brick/ground.js","webpack:///./src/components/brick/largeBrick.js","webpack:///./src/components/brick/manOutline.js","webpack:///./src/components/brick/brickController.js","webpack:///./src/components/brick/brick.js","webpack:///./src/components/brick/index.js","webpack:///./src/pages/what-am-i-doing.js"],"names":["FullPage","containerRef","React","createRef","pageHeight","window","innerHeight","resetHeight","_this","current","style","height","debounceResetHeight","debounce","leading","componentDidMount","addEventListener","this","componentWillUnmount","removeEventListener","render","react_default","a","createElement","ref","className","props","children","Component","BrickAtom","x","y","body","Bodies","rectangle","width","density","frictionAir","friction","__img","Image","src","_proto","prototype","draw","ctx","_this$body","position","angle","save","translate","rotate","drawImage","restore","dispose","createClass_default","key","get","set","_ref","Body","Ground","__width","__height","isStatic","frictionStatic","_this$body$position","fillStyle","fillRect","decomp","LargeBrick","scale","fromVertices","__originalScale","isDragging","update","EndX","ratio","__scale","Width","Height","fillText","value","ManOutline","__x","__y","BrickController","dom","handleMouseMove","e","__largeBrick","_e$mouse$position","mouse","newBrick","__bricks","push","__tmpBrick","resetLargeBrick","handleMouseUp","console","log","World","add","__engine","world","handleAfterUpdate","__dom","getContext","clearRect","CanvasWidth","CanvasHeight","forEach","brick","handleDragStart","handleDragEnd","__world","create","bounds","min","max","CanvasHeigh","Engine","__mouse","Mouse","__mouseConstraint","MouseConstraint","constraint","stiffness","visible","gravity","__ground","__lastTimeStamp","createGround","createBodies","setCanvasRatio","canvas","context","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","oldWidth","oldHeight","__ratio","_this2","i","count","j","atom","manOutline","loop","Events","on","run","_this3","remove","filter","concat","clear","err","error","Container","styled","div","withConfig","displayName","componentId","Brick","_Component","call","resetSize","worldContainerRef","innerWidth","debounceResetSize","canvasRef","controller","Background","createGlobalStyle","_templateObject","WhatAmIDoing","react","fullPage","components_brick"],"mappings":"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","file":"component---src-pages-what-am-i-doing-js-89223003027692e545ee.js","sourcesContent":["import React, { Component } from 'react';\nimport { debounce } from 'lodash-es';\n\nclass FullPage extends Component {\n\n  containerRef = React.createRef();\n  pageHeight = window.innerHeight;\n\n  resetHeight = () => {\n    this.containerRef.current.style.height = window.innerHeight + 'px';\n  }\n\n  debounceResetHeight = debounce(this.resetHeight, 200, {\n    leading: true,\n  });\n\n  componentDidMount() {\n    window.addEventListener('resize', this.debounceResetHeight)\n    this.resetHeight();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debounceResetHeight);\n  }\n\n  render() {\n    return (\n      <div ref={this.containerRef} className=\"full-page\">\n        {this.props.children}\n      </div>\n    );\n  }\n\n}\n\nexport default FullPage;\n","import { Bodies, Body } from 'matter-js';\n\nexport class BrickAtom {\n\n  static width = 42;\n  static height = 24;\n\n  /**\n   * @param {number} x \n   * @param {number} y \n   */\n  constructor(x, y) {\n    this.body = Bodies.rectangle(\n      x,\n      y,\n      BrickAtom.width,\n      BrickAtom.height,\n      {\n        density: 10,\n        frictionAir: 0.035,\n        friction: 0.1,\n      },\n    );\n    this.__img = new Image();\n    this.__img.src = '/images/brick.png';\n  }\n\n  get position() {\n    return this.body.position;\n  }\n\n  set position({ x, y }) {\n    Body.set(this.body, {\n      position: { x, y },\n    });\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position, angle } = this.body;\n    ctx.save();\n    ctx.translate(position.x, position.y);\n    ctx.rotate(angle);\n    ctx.drawImage(\n      this.__img,\n      -1 * BrickAtom.width / 2,\n      -1 * BrickAtom.height / 2,\n      BrickAtom.width,\n      BrickAtom.height,\n    );\n    ctx.restore();\n  }\n\n  dispose() {\n  }\n\n}\n","import { Bodies } from 'matter-js';\n\nexport class Ground {\n\n  /**\n   * \n   * @param {number} x \n   * @param {number} y \n   * @param {number} width\n   * @param {number} height\n   */\n  constructor(x, y, width, height) {\n    this.__width = width;\n    this.__height = height;\n    this.body = Bodies.rectangle(\n      x, y,\n      width, height,\n      {\n        isStatic: true,\n        friction: 0.99,\n        frictionStatic: 0.99,\n      },\n    );\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position: { x, y } } = this.body;\n    ctx.save();\n    ctx.fillStyle = \"black\";\n    ctx.translate(x, y);\n    ctx.fillRect(-0.5 * this.__width, -this.__height * 0.5, this.__width, this.__height);\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Bodies, Body } from 'matter-js';\nimport decomp from 'poly-decomp';\n\nwindow.decomp = decomp;\n\nexport class LargeBrick {\n\n  static Width = 512;\n  static Height = 512;\n  static EndX = 680;\n\n  /**\n   * \n   * @param {number} x \n   * @param {number} y \n   * @param {number} scale\n   */\n  constructor(x, y, scale = 0.5) {\n    this.body = Bodies.fromVertices(\n      x,\n      y,\n      [\n        { x: 306, y: 8.5 },\n        { x: 500, y: 75 },\n        { x: 505.5, y: 162.5 },\n        { x: 265.5, y: 500.5 },\n        { x: 14, y: 304 },\n        { x: 14, y: 240 },\n        { x: 306, y: 8.5 },\n      ],\n      {\n        density: 200,\n        frictionAir: 0.035,\n        friction: 0.78,\n      },\n    );\n    this.__originalScale = scale;\n    this.scale = scale;\n    this.__img = new Image();\n    this.__img.src = '/images/large-brick-rect.png';\n    this.isDragging = false;\n  }\n\n  get scale() {\n    return this.__scale;\n  }\n\n  set scale(value) {\n    this.__scale = value;\n    Body.scale(this.body, value, value);\n  }\n\n  update() {\n    const { position: { x } } = this.body;\n    if (x >= 200 && x < LargeBrick.EndX) {\n      const ratio = (LargeBrick.EndX - x) / (LargeBrick.EndX - 200);\n      // this.scale = this.__originalScale * ratio;\n      this.__scale = this.__originalScale * ratio;\n      // Body.scale(this.body, ratio / this.__originalScale, ratio / this.__originalScale);\n      // this.__originalScale = this.__originalScale * ratio;\n    } else {\n      // this.scale = this.__originalScale;\n    }\n      // this.scale = this.__originalScale;\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position, angle } = this.body;\n    ctx.save();\n    ctx.translate(position.x, position.y);\n    ctx.rotate(angle);\n    ctx.drawImage(\n      this.__img,\n      // 0, 0,\n      -1 * LargeBrick.Width / 2 * this.__scale,\n      -1 * LargeBrick.Height / 2 * this.__scale,\n      LargeBrick.Width * this.__scale,\n      LargeBrick.Height * this.__scale,\n    );\n    ctx.fillStyle =\"black\";\n    ctx.fillText(\n      `x: ${position.x} y: ${position.y}`,\n      -1 * LargeBrick.Width / 2 * this.__scale,\n      -1 * LargeBrick.Height / 2 * this.__scale,\n    )\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Bodies } from 'matter-js';\n\nexport class ManOutline {\n\n  static Width = 156;\n  static Height = 156;\n\n  constructor(x, y) {\n    this.__x = x;\n    this.__y = y;\n\n    this.body = Bodies.fromVertices(\n      x, y,\n      [\n        { x: 31.5, y: 34.5 },\n        { x: 81.5, y: 88 },\n        { x: 126.5, y: 47.5 },\n        { x: 97.5, y: 103.5 },\n        { x: 56.5, y: 103.5 }\n      ],\n      { isStatic: true },\n    )\n\n    this.__img = new Image();\n    this.__img.src = '/images/MAN.png';\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    ctx.save(0);\n    ctx.translate(this.__x, this.__y);\n    ctx.drawImage(\n      this.__img,\n      -1 * ManOutline.Width / 2 + 5,\n      -1 * ManOutline.Height / 2 - 10 ,\n      ManOutline.Width,\n      ManOutline.Height,\n    );\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Engine, World, Mouse, MouseConstraint, Events } from 'matter-js';\nimport { BrickAtom } from './brickAtom';\nimport { Ground } from './ground';\nimport { LargeBrick } from './largeBrick';\nimport { ManOutline } from './manOutline';\n\nexport class BrickController {\n\n  static CanvasWidth = 920;\n  static CanvasHeight = 480;\n\n  /**\n   * @param {HTMLCanvasElement} dom \n   */\n  constructor(dom) {\n    this.__dom = dom;\n    dom.width = BrickController.CanvasWidth;\n    dom.height = BrickController.CanvasHeight;\n    // this.setCanvasRatio(dom);\n    this.__world = World.create({\n      bounds: {\n        min: {\n          x: 0, y: 0,\n        },\n        max: {\n          x: BrickController.CanvasWidth,\n          y: BrickController.CanvasHeigh,\n        },\n      }\n    });\n\n    this.__engine = Engine.create({\n      world: this.__world,\n    });\n\n    // this.__render = Render.create({\n    //   canvas: this.__dom,\n    //   engine: this.__engine,\n    //   options: {\n    //     width: BrickController.CanvasWidth,\n    //     height: BrickController.CanvasHeight,\n    //     // showAxes: true,\n    //     // showAngleIndicator:true\n    //   },\n    // });\n\n    this.__mouse = Mouse.create(this.__dom);\n    this.__mouseConstraint = MouseConstraint.create(this.__engine, {\n      mouse: this.__mouse,\n      constraint: {\n        stiffness: 0.2,\n        render: {\n            visible: false,\n        },\n      },\n    });\n\n    World.add(this.__engine.world, this.__mouseConstraint);\n\n    this.__engine.world.gravity.y = 1;\n\n    this.__bricks = [];\n    this.__ground = null;\n    this.__lastTimeStamp = null;\n    this.createGround();\n    this.createBodies();\n    this.resetLargeBrick();\n  }\n\n  /**\n   * \n   * @param {HTMLCanvasElement} dom \n   */\n  setCanvasRatio(canvas) {\n    const context = canvas.getContext('2d');\n    var devicePixelRatio = window.devicePixelRatio || 1\n    const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1\n    const ratio = devicePixelRatio / backingStoreRatio;\n\n    const oldWidth = canvas.width;\n    const oldHeight = canvas.height;\n    canvas.width = oldWidth * ratio;\n    canvas.height = oldHeight * ratio;\n    canvas.style.width = oldWidth + 'px';\n    canvas.style.height = oldHeight + 'px';\n    context.scale(this.__ratio * 2, this.__ratio * 2);\n    this.__ratio = ratio;\n  }\n\n  createGround() {\n    this.__ground = new Ground(\n      480, 420,\n      BrickController.CanvasWidth, 10,\n    );\n    this.__bricks.push(this.__ground);\n    // World.add(this.__engine.world, this.__ground.body);\n  }\n\n  createBodies() {\n    const beginX = 620;\n    const beginY = 400;\n\n    for (let i = 0; i < 4; i++) {\n      const count = 5 - i;\n      for (let j = 0; j < count; j++) {\n        const atom = new BrickAtom(beginX + BrickAtom.width * (j + i/2), beginY - BrickAtom.height * i);\n        this.__bricks.push(atom);\n      }\n    }\n\n    const manOutline = new ManOutline(110, 348);\n    this.__bricks.push(manOutline);\n\n    this.__bricks.forEach(brick => {\n      World.add(this.__engine.world, brick.body);\n    });\n  }\n\n  loop() {\n    // window.requestAnimationFrame(this.draw);\n    // Events.on(this.__render, \"afterRender\", this.handleAfterRender);\n    Events.on(this.__engine, \"afterUpdate\", this.handleAfterUpdate);\n    Events.on(this.__mouseConstraint, \"mousemove\", this.handleMouseMove);\n    Events.on(this.__mouseConstraint, \"mouseup\", this.handleMouseUp);\n    Events.on(this.__mouseConstraint, \"startdrag\", this.handleDragStart);\n    Events.on(this.__mouseConstraint, \"enddrag\", this.handleDragEnd);\n    Engine.run(this.__engine);\n    // Render.run(this.__render);\n  }\n\n  handleMouseMove = e => {\n    if (this.__largeBrick && this.__largeBrick.isDragging) {\n      const { position: { x, y } } = e.mouse;\n      if (x > LargeBrick.EndX - 120) {\n        const newBrick = new BrickAtom(x, y);\n        this.__bricks.push(newBrick);\n        this.__tmpBrick = newBrick;\n\n        this.resetLargeBrick();\n      }\n    }\n\n    if (this.__tmpBrick) {\n      const { position } = e.mouse;\n      this.__tmpBrick = position;\n    }\n  }\n\n  handleMouseUp = e => {\n    console.log(e);\n    if (this.__tmpBrick) {\n      World.add(this.__engine.world, this.__tmpBrick.body);\n    }\n  }\n\n  handleAfterUpdate = () => {\n    this.__largeBrick.update();\n\n    /** @type {CanvasRenderingContext2D} */\n    const ctx = this.__dom.getContext('2d');\n\n    ctx.clearRect(0, 0, BrickAtom.width, BrickAtom.height);\n    ctx.fillStyle = \"#FFF3DE\";\n    ctx.fillRect(0, 0, BrickController.CanvasWidth, BrickController.CanvasHeight);\n    // this.__ground.draw(ctx);\n    this.__bricks.forEach(brick => brick.draw(ctx));\n  }\n\n  handleDragStart = e => {\n    if (this.__largeBrick && e.body === this.__largeBrick.body) {\n      this.__largeBrick.isDragging = true;\n    }\n  }\n\n  handleDragEnd = e => {\n    if (this.__largeBrick && e.body === this.__largeBrick.body) {\n      this.resetLargeBrick();\n    }\n  }\n\n  resetLargeBrick() {\n    if (this.__largeBrick) {\n      this.__largeBrick.dispose();\n      World.remove(this.__engine.world, this.__largeBrick.body);\n      this.__bricks = this.__bricks.filter(brick => brick !== this.__largeBrick);\n    }\n\n    this.__largeBrick = new LargeBrick(120, 30);\n    World.add(this.__engine.world, this.__largeBrick.body);\n    this.__bricks = [this.__largeBrick].concat(this.__bricks);\n  }\n\n  // draw = timestamp => {\n  //   if (!this.__lastTimeStamp) {\n  //     this.__lastTimeStamp = timestamp;\n  //   }\n  //   const delta = timestamp - this.__lastTimeStamp;\n  //   this.__lastTimeStamp = timestamp;\n\n  //   // do something\n  //   Engine.update(this.__engine, delta);\n\n  //   const ctx = this.__dom.getContext('2d');\n  //   ctx.clearRect(0, 0, BrickAtom.width, BrickAtom.height);\n  //   this.__bricks.forEach(brick => brick.draw(ctx));\n\n  //   window.requestAnimationFrame(this.draw)\n  // }\n\n  dispose() {\n    // Render.stop(this.__render);\n    Engine.clear(this.__engine);\n    this.__bricks.forEach(brick => {\n      try {\n        brick.dispose();\n      } catch (err) {\n        console.error(err);\n      }\n    });\n    // window.cancelAnimationFrame(this.draw);\n  }\n\n}\n","import React, { Component } from 'react';\nimport { BrickController } from './brickController';\nimport { debounce } from 'lodash-es';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nclass Brick extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.worldContainerRef = React.createRef();\n    this.canvasRef = React.createRef();\n    this.controller = null;\n  }\n\n  componentDidMount() {\n    this.controller = new BrickController(this.canvasRef.current);\n    this.resetSize();\n    this.controller.loop();\n    window.addEventListener('resize', this.debounceResetSize);\n  }\n\n  resetSize = () => {\n    this.worldContainerRef.current.style.width = window.innerWidth + 'px';\n    this.worldContainerRef.current.style.height = window.innerHeight + 'px';\n  }\n\n  debounceResetSize = debounce(this.resetSize, 200, {\n    leading: true,\n  });\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debounceResetSize);\n    \n    if (this.controller) {\n      this.controller.dispose();\n      this.controller = null;\n    }\n  }\n\n  render() {\n    return (\n      <Container\n        ref={this.worldContainerRef}\n        className=\"brick-world\"\n      >\n        <canvas ref={this.canvasRef} />\n      </Container>\n    );\n  }\n\n}\n\nexport default Brick;\n","import Brick from './brick';\n\nexport default Brick;\n","import React, { Fragment } from 'react';\nimport { createGlobalStyle } from 'styled-components';\nimport FullPage from '../components/fullPage';\nimport Brick from '../components/brick';\n\nconst Background = createGlobalStyle`\n  body {\n    background-color: #FFF3DE;\n  }\n\n  .full-page {\n    overflow: hidden;\n  }\n`;\n\nconst WhatAmIDoing = () => {\n  return (\n    <Fragment>\n      <Background />\n      <FullPage>\n        Chen Duzhong 在做什么？\n      </FullPage>\n      <FullPage>\n        {/* 帮中少搬砖，获得神秘礼品🎁！ */}\n        <Brick />\n      </FullPage>\n    </Fragment>\n  )\n};\n\nexport default WhatAmIDoing;\n"],"sourceRoot":""}