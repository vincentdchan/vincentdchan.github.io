{"version":3,"sources":["webpack:///./node_modules/react-progressive-image/dist.js","webpack:///./src/components/excerpt.js","webpack:///./src/pages/articles.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_assertThisInitialized","self","ReferenceError","_defineProperty","value","exports","default","ProgressiveImage","_React$Component","_this","call","instance","Constructor","TypeError","_classCallCheck","this","src","srcSetData","image","onload","onerror","Image","onLoad","onError","srcset","srcSet","sizes","delay","setImageWithDelay","setImage","setTimeout","setState","loading","errorEvent","state","placeholder","protoProps","staticProps","subClass","superClass","create","_inherits","_this$props","loadImage","prevProps","_this2","_this$props2","_this$state","children","Error","__esModule","newObj","hasOwnProperty","desc","getOwnPropertyDescriptor","get","set","_interopRequireWildcard","Component","Excerpt","styled","medium","IndexPage","query","render","data","headerImage","alt","style","margin","title","keywords","allMarkdownRemark","edges","map","node","path","frontmatter","date","Date","year","getFullYear","toString","month","getMonth","permalink","Title","to","moment","format","betterDate","excerpt"],"mappings":"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","file":"component---src-pages-articles-js-7e852f2a6018b3fbc1e5.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar ProgressiveImage = /*#__PURE__*/function (_React$Component) {\n  _inherits(ProgressiveImage, _React$Component);\n\n  function ProgressiveImage(props) {\n    var _this;\n\n    _classCallCheck(this, ProgressiveImage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProgressiveImage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"image\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"loadImage\", function (src, srcSetData) {\n      // If there is already an image we nullify the onload\n      // and onerror props so it does not incorrectly set state\n      // when it resolves\n      if (_this.image) {\n        _this.image.onload = null;\n        _this.image.onerror = null;\n      }\n\n      var image = new Image();\n      _this.image = image;\n      image.onload = _this.onLoad;\n      image.onerror = _this.onError;\n      image.src = src;\n\n      if (srcSetData) {\n        image.srcset = srcSetData.srcSet;\n        image.sizes = srcSetData.sizes;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onLoad\", function () {\n      // use this.image.src instead of this.props.src to\n      // avoid the possibility of props being updated and the\n      // new image loading before the new props are available as\n      // this.props.\n      if (_this.props.delay) {\n        _this.setImageWithDelay();\n      } else {\n        _this.setImage();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setImageWithDelay\", function () {\n      setTimeout(function () {\n        _this.setImage();\n      }, _this.props.delay);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setImage\", function () {\n      _this.setState({\n        image: _this.image.src,\n        loading: false,\n        srcSetData: {\n          srcSet: _this.image.srcset || '',\n          sizes: _this.image.sizes || ''\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onError\", function (errorEvent) {\n      var onError = _this.props.onError;\n\n      if (onError) {\n        onError(errorEvent);\n      }\n    });\n\n    _this.state = {\n      image: props.placeholder,\n      loading: true,\n      srcSetData: {\n        srcSet: '',\n        sizes: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(ProgressiveImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          src = _this$props.src,\n          srcSetData = _this$props.srcSetData;\n      this.loadImage(src, srcSetData);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          src = _this$props2.src,\n          placeholder = _this$props2.placeholder,\n          srcSetData = _this$props2.srcSetData; // We only invalidate the current image if the src has changed.\n\n      if (src !== prevProps.src) {\n        this.setState({\n          image: placeholder,\n          loading: true\n        }, function () {\n          _this2.loadImage(src, srcSetData);\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.image) {\n        this.image.onload = null;\n        this.image.onerror = null;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          image = _this$state.image,\n          loading = _this$state.loading,\n          srcSetData = _this$state.srcSetData;\n      var children = this.props.children;\n\n      if (!children || typeof children !== 'function') {\n        throw new Error(\"ProgressiveImage requires a function as its only child\");\n      }\n\n      return children(image, loading, srcSetData);\n    }\n  }]);\n\n  return ProgressiveImage;\n}(React.Component);\n\nexports.default = ProgressiveImage;","import styled from 'styled-components';\nimport { medium } from './colors';\n\nconst Excerpt = styled.p`\n  font-size: 16px;\n  line-height: normal;\n  margin-bottom: 36px;\n  color: ${medium};\n`\n\nexport default Excerpt\n","import React from 'react'\nimport { StaticQuery, graphql } from 'gatsby'\nimport moment from 'moment';\nimport ProgressiveImage from 'react-progressive-image'\n\nimport Layout from '../components/layout'\nimport SEO from '../components/seo'\nimport Title from '../components/Title'\nimport PostMeta from '../components/postMeta'\nimport Excerpt from '../components/excerpt'\nimport HeaderImagePlaceFolder from '../components/headerImagePlaceHolder'\n\nfunction betterDate(date) {\n  return moment(date).format('YYYY-MM-DD');\n}\n\nconst IndexPage = () => (\n  <StaticQuery\n    query={graphql`\n    query {\n      allMarkdownRemark(\n        sort: { order: DESC, fields: [frontmatter___date] }\n        limit: 1000\n      ) {\n        edges {\n          node {\n            excerpt(pruneLength: 160, truncate: true)\n            frontmatter {\n              title\n              date\n              path\n              permalink\n            }\n          }\n        }\n      }\n    }\n    `}\n    render={data => (\n      <Layout\n        headerImage={\n          <ProgressiveImage src=\"/images/homepage.jpg\" placeholder=\"\">\n            {(src, loading) => {\n              return loading ? <HeaderImagePlaceFolder /> : (\n                <img\n                  src={src}\n                  alt=\"\"\n                  style={{\n                    margin: '0px',\n                  }}\n                />\n              );\n            }}\n          </ProgressiveImage>\n        }\n      >\n        <SEO\n          title=\"文章\"\n          keywords={[\n            `blog`,\n            `technology`,\n            `photography`,\n          ]}\n        />\n        {\n          data.allMarkdownRemark.edges.map(({ node }) => {\n            let path = node.frontmatter.path;\n            if (!path) {\n              const date = new Date(node.frontmatter.date);\n              const year = date.getFullYear().toString();\n              let month = (date.getMonth() + 1).toString();\n              if (month.length < 2) {\n                month = '0' + month;\n              }\n              path = `/${year}/${month}/${node.frontmatter.permalink}`;\n            }\n            return (\n              <div key={node.frontmatter.title}>\n                <Title to={path}>\n                  {node.frontmatter.title}\n                </Title>\n                <PostMeta>\n                  Posted at {betterDate(node.frontmatter.date)}\n                </PostMeta>\n                <Excerpt>\n                  {node.excerpt}\n                </Excerpt>\n              </div>\n            )\n          })\n        }\n      </Layout>\n    )}\n  />\n)\n\nexport default IndexPage\n"],"sourceRoot":""}