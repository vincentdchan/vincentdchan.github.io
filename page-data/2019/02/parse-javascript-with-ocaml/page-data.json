{"componentChunkName":"component---src-templates-blog-template-js","path":"/2019/02/parse-javascript-with-ocaml","result":{"data":{"markdownRemark":{"html":"<h1>èµ·å› </h1>\n<p>æœ€è¿‘åœ¨å†™ä¸€ä¸ªå…³äº JavaScript çš„é™æ€åˆ†æå™¨ï¼Œä½œä¸ºæˆ‘çš„æ¯•ä¸šè®¾è®¡ã€‚æˆ‘å†™é™æ€åˆ†æä¸»è¦æ˜¯ä¸ºäº† ES6 å±‚é¢çš„è¯­æ³•åšæ›´å¥½çš„ DCE(Dead Code Elimination)ã€‚æˆ‘é€‰æ‹© OCaml æ¥å®ç°è¿™ä¸ªé™æ€åˆ†æå·¥å…·ï¼Œç”¨ flow æ¥ parse JavaScriptã€‚</p>\n<h1>ä¸ºä»€ä¹ˆé€‰æ‹© OCaml</h1>\n<p>åœ¨å’Œå¯¼å¸ˆè®¨è®ºé¢˜ç›®çš„æ—¶å€™ï¼Œæˆ‘è·Ÿå¯¼å¸ˆè¯´è¿™ä¸ªé¡¹ç›®ç”¨ Java æ¥å†™ï¼Œä¸»è¦æ˜¯ Java æ¯”è¾ƒå®¹æ˜“è¯´æœè€å¸ˆã€‚å®é™…ä¸Šå¼€å§‹å†™çš„æ—¶å€™å°±å¡äº†å¾ˆå¤šç§è´§ï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å…¶å®ç”¨çš„æ˜¯ Scalaï¼ŒåŸå› æ˜¯ï¼š</p>\n<ul>\n<li>Scala é‡Œé¢çš„å¾ˆå¤šè¯­è¨€ç‰¹æ€§éå¸¸æœ‰ FP é£æ ¼ï¼Œä¹Ÿå¾ˆé€‚åˆç”¨æ¥å†™ç¼–è¯‘å™¨å’Œé™æ€åˆ†æå·¥å…·ã€‚</li>\n<li>è¿è¡Œåœ¨ JVM ä¸Šé¢æ›´å®¹æ˜“åšå¤šçº¿ç¨‹ï¼Œå¯ä»¥ä½¿é™æ€åˆ†æè¿‡ç¨‹æœ‰è¾ƒå¤§çš„æå‡ã€‚</li>\n<li>å¦‚æœæœ‰éœ€è¦ï¼ŒScala å¯ä»¥ç¼–è¯‘æˆ JSã€‚JVM ä¸Šé¢ä¹Ÿæœ‰å¾ˆå¤šå¯ä»¥å’Œ JS è”åŠ¨çš„æ–¹æ¡ˆï¼Œæ–¹ä¾¿å’Œå…¶ä»– JS library è”åŠ¨ã€‚</li>\n</ul>\n<p>ä½†æ˜¯å¼€å§‹ä½¿ç”¨ Scala çš„æ—¶å€™å´å‘ç°äº†è®¸å¤šé—®é¢˜ï¼š</p>\n<ul>\n<li>æˆ‘ä½¿ç”¨çš„ Parser å’Œ AST ç»“æ„éƒ½æ˜¯ Java å†™çš„ï¼ˆä½¿ç”¨äº† Graal.js çš„ Parserï¼‰ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨ Scala çš„ case class é£æ ¼ï¼Œè¿™æ„å‘³ç€æˆ‘è¦åœ¨ Scala é‡Œé¢å†™ Java Style çš„ä»£ç ï¼Œæˆ‘è¡¨ç¤ºå¾ˆæ‹’ç»ã€‚æˆ‘å½“ç„¶å¯ä»¥ç”¨ implicit è¯­æ³•å†™ä¸€å±‚è½¬æ¢å±‚ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™æ ·å¾ˆè›‹ç–¼ï¼Œæ‰€ä»¥æ”¾å¼ƒã€‚</li>\n<li>æˆ‘è¦è¿›è¡Œçš„é™æ€åˆ†ææ˜¯åŸºäºå›¾ï¼ˆGraphï¼‰çš„ï¼Œä¼¼ä¹æ²¡åŠæ³•è¿›è¡Œå¹¶è¡Œè®¡ç®—ï¼Œå³ä½¿å¯ä»¥ï¼Œä¹Ÿä¼šæœ‰è¶…çº§å¤š overheadï¼Œè¿˜ä¸å¦‚ä½¿ç”¨å•çº¿ç¨‹ã€‚</li>\n<li>å·¨æ…¢çš„ç¼–è¯‘é€Ÿåº¦å’Œå¯åŠ¨æ—¶é—´ã€‚ç¼–è¯‘é€Ÿåº¦ä¸è¯´äº†ã€‚è¿è¡Œé€Ÿåº¦ Scala åº”è¯¥æ˜¯å¾ˆå¿«çš„ï¼Œä½†æ˜¯å¯åŠ¨ï¼ˆé¢„çƒ­ï¼‰å´å¾ˆæ…¢ã€‚</li>\n</ul>\n<p>ç§ç§è›‹ç–¼çš„æƒ…å†µè®©æˆ‘é‡æ–°å®¡è§†ç”¨ Scala æ˜¯ä¸æ˜¯ç‰¹åˆ«å¥½çš„æ–¹æ¡ˆï¼Œæˆ‘æƒ³è¦ä¸€é—¨æ‰§è¡Œé€Ÿåº¦ç›¸å¯¹è¾ƒå¿«ï¼Œè¯­æ³•å¯¹å†™ç¼–è¯‘å™¨ç›¸å¯¹å‹å¥½çš„è¯­è¨€ã€‚Scala å·²ç»å¾ˆæ¥è¿‘äº†ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿã€‚è¿™è®©æˆ‘æƒ³èµ·ä¹‹å‰ç”¨è¿‡ OCaml æ¥å†™è¿‡ç¼–è¯‘å™¨ï¼Œæ„Ÿè§‰ä»£æ•°å½¢å¼çš„æ•°æ®ç»“æ„å¤©ç”Ÿå¯¹ç¼–è¯‘å™¨å’Œé™æ€åˆ†æéå¸¸å‹å¥½ã€‚è€Œä¸”æœ‰ä¸¤ä¸ªé¡¹ç›®éå¸¸å¯å‘åˆ°æˆ‘ï¼š</p>\n<ul>\n<li><strong><a href=\"https://flow.org/\">Flow</a></strong>ï¼šé™æ€åˆ†æå·¥å…·ï¼Œä½†æ˜¯å·²ç»æ¼”åŒ–åˆ°ç±»ä¼¼ TypeScript é‚£æ ·ï¼Œå˜æˆä¸€é—¨è¯­è¨€äº†ã€‚æˆ‘ä¸ªäººç”¨è¿‡ flowï¼Œä½†æ˜¯æ„Ÿè§‰éå¸¸æ…¢ï¼Œæ¯” TypeScript æ…¢å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘è§‰å¾—ä¸æ˜¯ OCaml æ…¢ï¼Œè€Œæ˜¯ flow æœ¬èº«è®¾è®¡çš„é—®é¢˜ã€‚è®¾è®¡ TypeScript çš„ Anders Hejlsberg æ¯•ç«Ÿæ˜¯ç¼–è¯‘å™¨é¢†åŸŸçš„å¤§ç‰›ï¼Œå¾ˆå¤šå‘éƒ½è¸©è¿‡ï¼Œåƒ TypeScript å’Œ VSCode è”åŠ¨ä½“éªŒè¿™ä¹ˆå¥½è‚¯å®šæ˜¯ç»è¿‡ä¼˜è‰¯è®¾è®¡çš„ã€‚</li>\n<li><strong><a href=\"https://bucklescript.github.io\">BuckleScript</a></strong>ï¼šæŠŠ OCaml ç¼–è¯‘åˆ° JS çš„ç¼–è¯‘å™¨ï¼ˆå…¶å®ä¹Ÿç®—ä¸€é—¨è¯­è¨€ï¼Ÿï¼‰ã€‚ä½œè€…å·ç§°ç¼–è¯‘é€Ÿåº¦æœ€å¿«çš„è¯­è¨€ï¼Œç¼–è¯‘é€Ÿåº¦æ¯” TypeScript è¿˜å¿«ï¼Œå¹¶é™„ä¸Šäº† benchmarkã€‚è¿™ç‚¹ä¹Ÿå¯ä»¥ç†è§£ã€‚æ¯•ç«Ÿ OCaml è¿™é—¨è¯­è¨€æ¯” TypeScript ç®€å•å¤ªå¤šäº†ã€‚è¿™è®©æˆ‘çœ‹åˆ°äº†ä¸€çº¿ç”Ÿæœºï¼ŒOCaml å†™å‡ºæ¥çš„ç¼–è¯‘å™¨ä¹Ÿå¯ä»¥å¾ˆå¿«çš„å•Šã€‚</li>\n</ul>\n<h2>ä¼˜ç‚¹ï¼š</h2>\n<ul>\n<li>ADT</li>\n<li>å†·å¯åŠ¨é€Ÿåº¦å´å¯ä»¥ç§’æ€ Scalaã€‚æƒ³è±¡ä¸€ä¸‹ç¼–è¯‘å‡ ä¸ªæ–‡ä»¶çš„é¡¹ç›®ï¼ŒScala è¿˜è¦ç­‰ JVM é¢„çƒ­æ‰èƒ½è¾¾åˆ°å³°å€¼ï¼Œå…¶å®å¾ˆè›‹ç–¼ã€‚</li>\n<li>ç¼–è¯‘é€Ÿåº¦å¾ˆå¿«ï¼ˆç›¸æ¯” Scalaï¼‰</li>\n</ul>\n<h2>ç¼ºç‚¹ï¼š</h2>\n<ul>\n<li>ç°åœ¨ OCaml ä¾ç„¶æ²¡æœ‰åŠæ³•å®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„å¤šçº¿ç¨‹ï¼šæœ‰ GILã€‚è€Œæˆ‘è§‰å¾—è¿™ä¸æ˜¯ç—›ç‚¹ï¼Œè€Œä¸” multi-core OCaml å‡†å¤‡æ¨å‡ºäº†ï¼ˆ2020 å¹´ï¼Ÿï¼‰ã€‚</li>\n<li>å¦‚æœéœ€è¦å’Œ JS è”åŠ¨ï¼Œéœ€è¦ç¼–è¯‘æˆ JS</li>\n</ul>\n<h1>ä½¿ç”¨ Flow Parser</h1>\n<p><strong>Github:</strong> <a href=\"https://github.com/facebook/flow\">https://github.com/facebook/flow</a></p>\n<p>Flow æ˜¯åˆ©å™¨ã€‚</p>\n<p>è‡ªå·±ä»å¤´å¼€å§‹å†™ ES çš„ Parser æ˜¯ä¸å¤ªç°å®çš„ã€‚å¾ˆå¹¸è¿ flow å°±æä¾›äº†è¿™ä¹ˆä¸€ä¸ªå·¥å…·ã€‚Flow çš„ä»£ç ç»“æ„è¿˜æ˜¯è›®æ¸…æ™°ï¼Œæˆ‘ä¸€çœ‹é¡¹ç›®ç›®å½•åŸºæœ¬äº†è§£å„ä¸ªæ¨¡å—çš„ä½œç”¨ï¼Œè€Œ parser æ˜¯ä½œä¸ºç‹¬ç«‹çš„ä¸€éƒ¨åˆ†ï¼š<a href=\"https://github.com/facebook/flow/tree/master/src/parser\">Flow Parser</a></p>\n<p>AST å®šä¹‰ï¼š<a href=\"https://github.com/facebook/flow/blob/master/src/parser/flow_ast.ml\">https://github.com/facebook/flow/blob/master/src/parser/flow_ast.ml</a></p>\n<p>Flow çš„ AST éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬çœ‹ program çš„å®šä¹‰ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token keyword\">type</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> program <span class=\"token operator\">=</span> <span class=\"token type_variable function\">'M</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Statement</span><span class=\"token punctuation\">.</span>t list <span class=\"token operator\">*</span> <span class=\"token type_variable function\">'M</span> <span class=\"token module variable\">Comment</span><span class=\"token punctuation\">.</span>t list <span class=\"token punctuation\">[</span><span class=\"token operator\">@@</span>deriving show<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ä¸€ä¸ª program å°±æ˜¯ <code class=\"language-text\">list of Statment.t</code>ã€‚æœ‰ä¸¤ä¸ªæ³›å‹å‚æ•° <code class=\"language-text\">&#39;M</code> å’Œ <code class=\"language-text\">&#39;T</code> å……æ–¥ç€æ•´ä¸ª ASTï¼Œè™½ç„¶å®ƒçš„ä½œç”¨å¾ˆå·§å¦™ï¼Œä½†æ˜¯å´å¹¶ä¸æ˜¯é‚£ä¹ˆç›´è§‚ã€‚å®é™…ä¸Š parser è¾“å‡ºçš„ç»“æœä¸­ï¼Œ<code class=\"language-text\">&#39;M</code> å’Œ <code class=\"language-text\">&#39;T</code> éƒ½æ˜¯ <code class=\"language-text\">Loc.t</code>ï¼Œå°±æ˜¯ AST çš„ä½ç½®ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªèŒƒå‹å‘¢ï¼Ÿæˆ‘ä»¬åªè¦çœ‹ <code class=\"language-text\">Statement</code> å’Œ <code class=\"language-text\">Expression</code> ä¸¤ä¸ªåœ°æ–¹çš„å®šä¹‰å°±æ˜ç™½äº†ï¼š</p>\n<p><strong>Statement</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\">  <span class=\"token operator\">and</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> t <span class=\"token operator\">=</span> <span class=\"token type_variable function\">'M</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> t'\n  <span class=\"token operator\">and</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> t' <span class=\"token operator\">=</span>\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Block</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Block</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Break</span> <span class=\"token keyword\">of</span> <span class=\"token type_variable function\">'M</span> <span class=\"token module variable\">Break</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">ClassDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Class</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Continue</span> <span class=\"token keyword\">of</span> <span class=\"token type_variable function\">'M</span> <span class=\"token module variable\">Continue</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Debugger</span>\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareClass</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">DeclareClass</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareExportDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">DeclareExportDeclaration</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareFunction</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">DeclareFunction</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareInterface</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Interface</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareModule</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">DeclareModule</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareModuleExports</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Type</span><span class=\"token punctuation\">.</span>annotation\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareTypeAlias</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">TypeAlias</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareOpaqueType</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">OpaqueType</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DeclareVariable</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">DeclareVariable</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">DoWhile</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">DoWhile</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Empty</span>\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">ExportDefaultDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">ExportDefaultDeclaration</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">ExportNamedDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">ExportNamedDeclaration</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Expression</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Expression</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">For</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">For</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">ForIn</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">ForIn</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">ForOf</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">ForOf</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">FunctionDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Function</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">If</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">If</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">ImportDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">ImportDeclaration</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">InterfaceDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Interface</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Labeled</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Labeled</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Return</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Return</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Switch</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Switch</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Throw</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Throw</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Try</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Try</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">TypeAlias</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">TypeAlias</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">OpaqueType</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">OpaqueType</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">VariableDeclaration</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">VariableDeclaration</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">While</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">While</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">With</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">With</span><span class=\"token punctuation\">.</span>t</code></pre></div>\n<p><strong>Expression</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\">  <span class=\"token keyword\">type</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> t <span class=\"token operator\">=</span> <span class=\"token type_variable function\">'T</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> t'\n  <span class=\"token operator\">and</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> t' <span class=\"token operator\">=</span>\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Array</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Array</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">ArrowFunction</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Function</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Assignment</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Assignment</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Binary</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Binary</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Call</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Call</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Class</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Class</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Comprehension</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Comprehension</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Conditional</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Conditional</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Function</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Function</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Generator</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Generator</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Identifier</span> <span class=\"token keyword\">of</span> <span class=\"token type_variable function\">'T</span> <span class=\"token module variable\">Identifier</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Import</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">JSXElement</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">JSX</span><span class=\"token punctuation\">.</span>element\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">JSXFragment</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">JSX</span><span class=\"token punctuation\">.</span>fragment\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Literal</span> <span class=\"token keyword\">of</span> <span class=\"token module variable\">Literal</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Logical</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Logical</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Member</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Member</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">MetaProperty</span> <span class=\"token keyword\">of</span> <span class=\"token type_variable function\">'M</span> <span class=\"token module variable\">MetaProperty</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">New</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">New</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Object</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Object</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">OptionalCall</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">OptionalCall</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">OptionalMember</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">OptionalMember</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Sequence</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Sequence</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Super</span>\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">TaggedTemplate</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">TaggedTemplate</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">TemplateLiteral</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">TemplateLiteral</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">This</span>\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">TypeCast</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">TypeCast</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Unary</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Unary</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Update</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Update</span><span class=\"token punctuation\">.</span>t\n    <span class=\"token operator\">|</span> <span class=\"token module variable\">Yield</span> <span class=\"token keyword\">of</span> <span class=\"token punctuation\">(</span><span class=\"token type_variable function\">'M</span><span class=\"token punctuation\">,</span> <span class=\"token type_variable function\">'T</span><span class=\"token punctuation\">)</span> <span class=\"token module variable\">Yield</span><span class=\"token punctuation\">.</span>t</code></pre></div>\n<p>ä¸Šè¿°ä»£ç å°±æ˜¯åœ¨è¯´ï¼Œæ‰€æœ‰çš„ Expression ç»“ç‚¹éƒ½ä¼šé™„ä¸Šä¸€ä¸ª <code class=\"language-text\">&#39;T</code> ä¿¡æ¯ï¼Œæ‰€æœ‰çš„ Statement éƒ½ä¼šé™„ä¸Šä¸€ä¸ª <code class=\"language-text\">&#39;M</code> ä¿¡æ¯ï¼Œè¿™å°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªèŒƒå‹æ˜¯ç”¨æ¥åŒºåˆ† Statement å’Œ Expression çš„ã€‚åœ¨ flow é‡Œé¢è¿›è¡Œ type infer å’Œ type check çš„æ—¶å€™ï¼Œå®é™…ä¸Š <code class=\"language-text\">&#39;T</code> ä¼šæ˜¯ <code class=\"language-text\">(Loc.t * Type.t)</code>ã€‚è¿™ä¸ªæ˜¯ type check é˜¶æ®µé™„ä¸Šçš„ä¿¡æ¯ï¼Œè€Œ Statement ä¸éœ€è¦è¿™ä¸ªä¿¡æ¯ï¼Œæ‰€ä»¥å®ƒä»ç„¶æ˜¯ <code class=\"language-text\">Loc.t</code>ã€‚ä¸¾ä¸ªç±»å‹æ¨å¯¼ä¾‹å­ ğŸŒ° æ¥è¯´æ˜ 'T é™„åœ¨è¡¨è¾¾å¼ä¸Šçš„ä½œç”¨ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var a = 1 + 1;\n\nvar a = ((1: &#39;T) + (1: &#39;T)): &#39;T\nvar a = ((1: number) + (1: number)): &#39;T\nvar a = ((1: number) + (1: number)): number\nvar a: number = ((1: number) + (1: number)): number</code></pre></div>\n<p>ä»ä¸Šè¿°è¿‡ç¨‹å¯ä»¥æ¨å‡º a çš„ç±»å‹æ˜¯ numberï¼Œè¿™ä¸ªç±»å‹ä¿¡æ¯æŒ‚åœ¨æ‰€æœ‰ expression çš„ AST çš„ä¸Šé¢ï¼Œè€Œ var è¯­å¥çš„ node ä¸éœ€è¦è¿™ä¸ªä¿¡æ¯ã€‚</p>\n<h1>å®‰è£… Flow Parser</h1>\n<p>åŸæœ¬ <code class=\"language-text\">flow_parser</code> å¯ä»¥ä» opam å®‰è£…ï¼Œä½†æ˜¯æˆ‘æ›´æ–°äº† opam ä¹‹åä¼¼ä¹å› ä¸ºä¸€äº›å®‰å…¨ç­–ç•¥ç¦æ­¢åŒ…é‡Œé¢çš„ bash è„šæœ¬æ‰§è¡Œï¼ˆå½“æ—¶ç¤¾åŒºå‘ç”Ÿäº†ä¸€ä»¶äº‹ï¼Œä¸€ä¸ªåŒ…çš„ bash è„šæœ¬æŠŠç”¨æˆ·çš„æ•´ä¸ª ~ ç›®å½•åˆ æ‰ï¼Œä¼¼ä¹æ˜¯æ‰‹æ»‘å†™çš„è„šæœ¬å°±å‘å¸ƒäº†ï¼Œåæ¥ opam å¯¹ bash è„šæœ¬åšäº†äº›é™åˆ¶ï¼‰ã€‚æ‰€ä»¥åæ¥æˆ‘åªèƒ½ clone äº† flow çš„ä»£ç æœ¬åœ°è¿›è¡Œå®‰è£…</p>\n<p>è¿›å…¥ <code class=\"language-text\">src/parser</code> ç›®å½•æ‰§è¡Œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">make</span> ocamlfind-install</code></pre></div>\n<p>å³å¯å®‰è£…æˆåŠŸã€‚å¦‚æœä½¿ç”¨ ocamlbuild ç¼–è¯‘ï¼Œè¿›å…¥ <code class=\"language-text\">_tag</code> æ–‡ä»¶ï¼ŒåŠ ä¸Š flow<em>parserã€‚æˆ‘çš„ `</em>tag`:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">true: package(ppx_deriving.show), package(flow_parser), package(core_kernel)\n&lt;dist&gt;: -traverse</code></pre></div>\n<h1>ä½¿ç”¨æ–¹æ³•</h1>\n<p>ä½¿ç”¨ <code class=\"language-text\">Flow_ast</code> è‡ªå¸¦çš„ <code class=\"language-text\">pp</code> å’Œ <code class=\"language-text\">show</code> æ–¹æ³•å¯ä»¥æŠŠ AST æ‰“å°å‡ºæ¥ï¼Œå‰ææ˜¯ä½ è¦ä¼ å…¥ <code class=\"language-text\">&#39;T</code> å’Œ <code class=\"language-text\">&#39;M</code> çš„ pretty print æ–¹æ³•ï¼Œ è¿™é‡Œæˆ‘æŠŠ <code class=\"language-text\">Loc.pp</code> ä¼ è¿›å»å³å¯ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token keyword\">let</span> ast<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">_</span> <span class=\"token operator\">=</span> <span class=\"token module variable\">Parser_flow</span><span class=\"token punctuation\">.</span>program code <span class=\"token keyword\">in</span>\n<span class=\"token module variable\">Flow_ast</span><span class=\"token punctuation\">.</span>show_program <span class=\"token module variable\">Loc</span><span class=\"token punctuation\">.</span>pp <span class=\"token module variable\">Loc</span><span class=\"token punctuation\">.</span>pp ast <span class=\"token operator\">|></span> print_endline<span class=\"token punctuation\">;</span></code></pre></div>\n<p>å¤§åŠŸå‘Šæˆï¼</p>\n<h1>ç›¸å…³é˜…è¯»</h1>\n<ul>\n<li>QuickJS æºç è§£è¯»ï¼š<a href=\"https://diverse.space/2019/08/understanding-source-code-of-quickjs-1\">https://diverse.space/2019/08/understanding-source-code-of-quickjs-1</a></li>\n</ul>","excerpt":"èµ·å›  æœ€è¿‘åœ¨å†™ä¸€ä¸ªå…³äº JavaScript çš„é™æ€åˆ†æå™¨ï¼Œä½œä¸ºæˆ‘çš„æ¯•ä¸šè®¾è®¡ã€‚æˆ‘å†™é™æ€åˆ†æä¸»è¦æ˜¯ä¸ºäº† ES6 å±‚é¢çš„è¯­æ³•åšæ›´å¥½çš„ DCE(Dead Code Elimination)ã€‚æˆ‘é€‰æ‹© OCaml æ¥å®ç°è¿™ä¸ªé™æ€åˆ†æå·¥å…·ï¼Œç”¨ flow æ¥ parse JavaScriptã€‚ ä¸ºä»€ä¹ˆé€‰æ‹© OCaml åœ¨å’Œå¯¼å¸ˆè®¨è®ºâ€¦","frontmatter":{"date":"2019-02-20","path":"/2019/02/parse-javascript-with-ocaml","title":"ä½¿ç”¨ OCaml è§£æ JavaScript","permalink":null,"headerImage":null,"tags":null}}},"pageContext":{"title":"ä½¿ç”¨ OCaml è§£æ JavaScript"}},"staticQueryHashes":["3128451518","3159585216","3649515864"]}