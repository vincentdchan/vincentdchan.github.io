{"componentChunkName":"component---src-templates-blog-template-js","path":"/2017/06/matrix-rain-by-html-canvas","webpackCompilationHash":"ddc2f6be48b3e750608d","result":{"data":{"markdownRemark":{"html":"<p>《黑客帝国》是我最喜欢的电影之一，我感觉《黑客帝国》里面的数字雨简直是一种艺术，非常好看，看上去非常高大上，而且和“雨”这种东西结合，非常有意思，于是想自己实现一下。</p>\n<p>效果图:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d0dab848e704fc95b1559329d05867f9/70ccc/matrix-ani.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.04687499999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3klEQVQoz21Syw7DIAxLeJaWaYf9/7cyqGzVrXqwgCTYccAs2rBsw4sP+819nXAgTKSJDajA2hvyjpp94rvi61AmItYsxVHiJMw4G3Ko8+rDj9nUmSxQyVipSjF2etiIRxzWXkQbmylihQX+6I77inMHYRJ0dt7gf4PCJsRZVgdJ4ayQIyHFl41TOcqcmGzyOOEiOR8wyMzp7iTsCPJSFsIq1nQURWLqKpEwPQo45A0kWR7KXmba5OvYBxejtJ1Q1GFx90vUIJBF9KuEx50wlHAvXoTJLwcmX4z/sl+W/33ny1L5gsdYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"matrix ani\"\n        title=\"\"\n        src=\"/static/d0dab848e704fc95b1559329d05867f9/84ad3/matrix-ani.png\"\n        srcset=\"/static/d0dab848e704fc95b1559329d05867f9/687da/matrix-ani.png 175w,\n/static/d0dab848e704fc95b1559329d05867f9/0ab4d/matrix-ani.png 350w,\n/static/d0dab848e704fc95b1559329d05867f9/84ad3/matrix-ani.png 700w,\n/static/d0dab848e704fc95b1559329d05867f9/ef8d3/matrix-ani.png 1050w,\n/static/d0dab848e704fc95b1559329d05867f9/70ccc/matrix-ani.png 1280w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n  </span>\n  </a></p>\n<p>在Canvas里面实现动画的思路其实很简单，在很短的时间里面刷新一次就行了。每次刷新的时候，字符都会下降，然而数字雨里面并不是整串“雨”往下移动一个单位，而是这个雨的最下端，显示了一个新的字符。</p>\n<p><img src=\"/images/matrix.gif\"></p>\n<p>所以我们不妨换个思路，就是其实每个字符的位置其实是固定，每次刷新的不是每个字符的位置，而是刷新他们的颜色，让一个字符的颜色从最绿慢慢变黑，然后又变最绿，然后慢慢变黑……周而复始。最后把每个字符用Canvas在对应的坐标画出来就行了。</p>\n<p>当然这当中有先后顺序，一列里面，第n个字符的颜色应该刚好比第n-1个字符少一个梯度，也就是说</p>\n<pre><code>第i秒的时候：\n    第N个字符的颜色为 A\n        第N-1字符的颜色为 A -1\n    \n第i+1秒的时候\n        第N个字符的颜色为A-1\n        第N-1个字符的颜色为A-2\n</code></pre>\n<p>当然了，为了要让每一条雨条下落的先后顺序不一样，必须给它们的颜色加一个随机的偏移量，然后取模，这样就会有先后落下的效果。</p>\n<p>最后附上源码，需要用Babel编译一下</p>\n<p><a href=\"https://gist.github.com/vincentdchan/aa426fc9767b2508d79fbefc87c659fd\">Github gist 源代码</a></p>","frontmatter":{"date":"2017-06-19T00:00:00.000Z","path":null,"title":"HTML Canvas实现《黑客帝国》数字雨","permalink":"matrix-rain-by-html-canvas","headerImage":null,"tags":["html5","canvas","matrix","animation"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"title":"HTML Canvas实现《黑客帝国》数字雨"}}}