{"version":3,"sources":["webpack:///./src/components/fullPage.js","webpack:///./src/components/brick/brickAtom.js","webpack:///./src/components/brick/ground.js","webpack:///./src/components/brick/largeBrick.js","webpack:///./src/components/brick/manOutline.js","webpack:///./src/components/brick/brickController.js","webpack:///./src/components/brick/brick.js","webpack:///./src/components/brick/index.js","webpack:///./src/pages/what-am-i-doing.js"],"names":["FullPage","props","_this","_Component","call","this","resetHeight","containerRef","current","style","height","window","innerHeight","debounceResetHeight","debounce","leading","React","createRef","pageHeight","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","react_default","a","createElement","ref","className","children","Component","BrickAtom","x","y","body","Bodies","rectangle","width","density","frictionAir","friction","__img","Image","src","_proto","prototype","draw","ctx","_this$body","position","angle","save","translate","rotate","drawImage","restore","dispose","createClass_default","key","get","set","_ref","Body","Ground","__width","__height","isStatic","frictionStatic","_this$body$position","fillStyle","fillRect","decomp","LargeBrick","scale","fromVertices","__originalScale","isDragging","update","EndX","ratio","__scale","Width","Height","fillText","value","ManOutline","__x","__y","BrickController","dom","handleMouseMove","e","__largeBrick","_e$mouse$position","mouse","newBrick","__bricks","push","__tmpBrick","resetLargeBrick","handleMouseUp","console","log","World","add","__engine","world","handleAfterUpdate","__dom","getContext","clearRect","CanvasWidth","CanvasHeight","forEach","brick","handleDragStart","handleDragEnd","__world","create","bounds","min","max","CanvasHeigh","Engine","__mouse","Mouse","__mouseConstraint","MouseConstraint","constraint","stiffness","visible","gravity","__ground","__lastTimeStamp","createGround","createBodies","setCanvasRatio","canvas","context","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","oldWidth","oldHeight","__ratio","_this2","i","count","j","atom","manOutline","loop","Events","on","run","_this3","remove","filter","concat","clear","err","error","Container","styled","div","withConfig","displayName","componentId","Brick","resetSize","worldContainerRef","innerWidth","debounceResetSize","canvasRef","controller","Background","createGlobalStyle","_templateObject","WhatAmIDoing","react","fullPage","components_brick"],"mappings":"yKAwCeA,cAnCb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAOFC,YAAc,WACZJ,EAAKK,aAAaC,QAAQC,MAAMC,OAASC,OAAOC,YAAc,MAT7CV,EAYnBW,oBAAsBC,YAASZ,EAAKI,YAAa,IAAK,CACpDS,SAAS,IAXTb,EAAKK,aAAeS,IAAMC,YACJ,oBAAXN,SACTT,EAAKgB,WAAaP,OAAOC,aAJVV,sCAgBnBiB,kBAAA,WACER,OAAOS,iBAAiB,SAAUf,KAAKQ,qBACvCR,KAAKC,iBAGPe,qBAAA,WACEV,OAAOW,oBAAoB,SAAUjB,KAAKQ,wBAG5CU,OAAA,WACE,OACEC,EAAAC,EAAAC,cAAA,OAAKC,IAAKtB,KAAKE,aAAcqB,UAAU,aACpCvB,KAAKJ,MAAM4B,cA9BGC,gDCDVC,EAAb,WASE,SAAAA,EAAYC,EAAGC,GACb5B,KAAK6B,KAAOC,SAAOC,UACjBJ,EACAC,EACAF,EAAUM,MACVN,EAAUrB,OACV,CACE4B,QAAS,GACTC,YAAa,KACbC,SAAU,KAGdnC,KAAKoC,MAAQ,IAAIC,MACjBrC,KAAKoC,MAAME,IAAM,oBAtBrB,IAAAC,EAAAb,EAAAc,UAAA,OAAAD,EAuCEE,KAAA,SAAKC,GAAK,IAAAC,EACoB3C,KAAK6B,KAAzBe,EADAD,EACAC,SAAUC,EADVF,EACUE,MAClBH,EAAII,OACJJ,EAAIK,UAAUH,EAASjB,EAAGiB,EAAShB,GACnCc,EAAIM,OAAOH,GACXH,EAAIO,UACFjD,KAAKoC,OACJ,EAAIV,EAAUM,MAAQ,GACtB,EAAIN,EAAUrB,OAAS,EACxBqB,EAAUM,MACVN,EAAUrB,QAEZqC,EAAIQ,WAnDRX,EAsDEY,QAAA,aAtDFC,IAAA1B,EAAA,EAAA2B,IAAA,WAAAC,IAAA,WA0BI,OAAOtD,KAAK6B,KAAKe,UA1BrBW,IAAA,SAAAC,GA6ByB,IAAR7B,EAAQ6B,EAAR7B,EAAGC,EAAK4B,EAAL5B,EAChB6B,OAAKF,IAAIvD,KAAK6B,KAAM,CAClBe,SAAU,CAAEjB,IAAGC,WA/BrBF,EAAA,GAAaA,EAEJM,MAAQ,GAFJN,EAGJrB,OAAS,GCHX,IAAMqD,EAAb,WASE,SAAAA,EAAY/B,EAAGC,EAAGI,EAAO3B,GACvBL,KAAK2D,QAAU3B,EACfhC,KAAK4D,SAAWvD,EAChBL,KAAK6B,KAAOC,SAAOC,UACjBJ,EAAGC,EACHI,EAAO3B,EACP,CACEwD,UAAU,EACV1B,SAAU,IACV2B,eAAgB,MAlBxB,IAAAvB,EAAAmB,EAAAlB,UAAA,OAAAD,EA2BEE,KAAA,SAAKC,GAAK,IAAAqB,EACuB/D,KAAK6B,KAA5Be,SAAYjB,EADZoC,EACYpC,EAAGC,EADfmC,EACenC,EACvBc,EAAII,OACJJ,EAAIsB,UAAY,QAChBtB,EAAIK,UAAUpB,EAAGC,GACjBc,EAAIuB,UAAU,GAAMjE,KAAK2D,QAA0B,IAAhB3D,KAAK4D,SAAgB5D,KAAK2D,QAAS3D,KAAK4D,UAC3ElB,EAAIQ,WAjCRX,EAoCEY,QAAA,aApCFO,EAAA,qBCCsB,oBAAXpD,SACTA,OAAO4D,OAASA,KAGX,IAAMC,EAAb,WAYE,SAAAA,EAAYxC,EAAGC,EAAGwC,QAAa,IAAbA,MAAQ,IACxBpE,KAAK6B,KAAOC,SAAOuC,aACjB1C,EACAC,EACA,CACE,CAAED,EAAG,IAAKC,EAAG,KACb,CAAED,EAAG,IAAKC,EAAG,IACb,CAAED,EAAG,MAAOC,EAAG,OACf,CAAED,EAAG,MAAOC,EAAG,OACf,CAAED,EAAG,GAAIC,EAAG,KACZ,CAAED,EAAG,GAAIC,EAAG,KACZ,CAAED,EAAG,IAAKC,EAAG,MAEf,CACEK,QAAS,IACTC,YAAa,KACbC,SAAU,MAGdnC,KAAKsE,gBAAkBF,EACvBpE,KAAKoE,MAAQA,EACbpE,KAAKoC,MAAQ,IAAIC,MACjBrC,KAAKoC,MAAME,IAAM,+BACjBtC,KAAKuE,YAAa,EAnCtB,IAAAhC,EAAA4B,EAAA3B,UAAA,OAAAD,EA+CEiC,OAAA,WAAS,IACa7C,EAAQ3B,KAAK6B,KAAzBe,SAAYjB,EACpB,GAAIA,GAAK,KAAOA,EAAIwC,EAAWM,KAAM,CACnC,IAAMC,GAASP,EAAWM,KAAO9C,IAAMwC,EAAWM,KAAO,KAEzDzE,KAAK2E,QAAU3E,KAAKsE,gBAAkBI,IApD5CnC,EAiEEE,KAAA,SAAKC,GAAK,IAAAC,EACoB3C,KAAK6B,KAAzBe,EADAD,EACAC,SAAUC,EADVF,EACUE,MAClBH,EAAII,OACJJ,EAAIK,UAAUH,EAASjB,EAAGiB,EAAShB,GACnCc,EAAIM,OAAOH,GACXH,EAAIO,UACFjD,KAAKoC,OAEJ,EAAI+B,EAAWS,MAAQ,EAAI5E,KAAK2E,SAChC,EAAIR,EAAWU,OAAS,EAAI7E,KAAK2E,QAClCR,EAAWS,MAAQ5E,KAAK2E,QACxBR,EAAWU,OAAS7E,KAAK2E,SAE3BjC,EAAIsB,UAAW,QACftB,EAAIoC,SAAJ,MACQlC,EAASjB,EADjB,OACyBiB,EAAShB,GAC/B,EAAIuC,EAAWS,MAAQ,EAAI5E,KAAK2E,SAChC,EAAIR,EAAWU,OAAS,EAAI7E,KAAK2E,SAEpCjC,EAAIQ,WApFRX,EAuFEY,QAAA,aAvFFC,IAAAe,EAAA,EAAAd,IAAA,QAAAC,IAAA,WAuCI,OAAOtD,KAAK2E,SAvChBpB,IAAA,SA0CYwB,GACR/E,KAAK2E,QAAUI,EACftB,OAAKW,MAAMpE,KAAK6B,KAAMkD,EAAOA,OA5CjCZ,EAAA,GAAaA,EAEJS,MAAQ,IAFJT,EAGJU,OAAS,IAHLV,EAIJM,KAAO,ICTT,IAAMO,EAAb,WAKE,SAAAA,EAAYrD,EAAGC,GACb5B,KAAKiF,IAAMtD,EACX3B,KAAKkF,IAAMtD,EAEX5B,KAAK6B,KAAOC,SAAOuC,aACjB1C,EAAGC,EACH,CACE,CAAED,EAAG,KAAMC,EAAG,MACd,CAAED,EAAG,KAAMC,EAAG,IACd,CAAED,EAAG,MAAOC,EAAG,MACf,CAAED,EAAG,KAAMC,EAAG,OACd,CAAED,EAAG,KAAMC,EAAG,QAEhB,CAAEiC,UAAU,IAGd7D,KAAKoC,MAAQ,IAAIC,MACjBrC,KAAKoC,MAAME,IAAM,kBAtBrB,IAAAC,EAAAyC,EAAAxC,UAAA,OAAAD,EA6BEE,KAAA,SAAKC,GACHA,EAAII,KAAK,GACTJ,EAAIK,UAAU/C,KAAKiF,IAAKjF,KAAKkF,KAC7BxC,EAAIO,UACFjD,KAAKoC,OACJ,EAAI4C,EAAWJ,MAAQ,EAAI,GAC3B,EAAII,EAAWH,OAAS,EAAI,GAC7BG,EAAWJ,MACXI,EAAWH,QAEbnC,EAAIQ,WAvCRX,EA0CEY,QAAA,aA1CF6B,EAAA,GAAaA,EAEJJ,MAAQ,IAFJI,EAGJH,OAAS,ICCX,IAAMM,EAAb,WAQE,SAAAA,EAAYC,GAAK,IAAAvF,EAAAG,UAwHjBqF,gBAAkB,SAAAC,GAChB,GAAIzF,EAAK0F,cAAgB1F,EAAK0F,aAAahB,WAAY,KAAAiB,EACtBF,EAAEG,MAAzB7C,SAAYjB,EADiC6D,EACjC7D,EAAGC,EAD8B4D,EAC9B5D,EACvB,GAAID,EAAIwC,EAAWM,KAAO,IAAK,CAC7B,IAAMiB,EAAW,IAAIhE,EAAUC,EAAGC,GAClC/B,EAAK8F,SAASC,KAAKF,GACnB7F,EAAKgG,WAAaH,EAElB7F,EAAKiG,mBAIT,GAAIjG,EAAKgG,WAAY,KACXjD,EAAa0C,EAAEG,MAAf7C,SACR/C,EAAKgG,WAAajD,IAtIL5C,KA0IjB+F,cAAgB,SAAAT,GACdU,QAAQC,IAAIX,GACRzF,EAAKgG,YACPK,QAAMC,IAAItG,EAAKuG,SAASC,MAAOxG,EAAKgG,WAAWhE,OA7IlC7B,KAiJjBsG,kBAAoB,WAClBzG,EAAK0F,aAAaf,SAGlB,IAAM9B,EAAM7C,EAAK0G,MAAMC,WAAW,MAElC9D,EAAI+D,UAAU,EAAG,EAAG/E,EAAUM,MAAON,EAAUrB,QAC/CqC,EAAIsB,UAAY,UAChBtB,EAAIuB,SAAS,EAAG,EAAGkB,EAAgBuB,YAAavB,EAAgBwB,cAEhE9G,EAAK8F,SAASiB,QAAQ,SAAAC,GAAK,OAAIA,EAAMpE,KAAKC,MA3J3B1C,KA8JjB8G,gBAAkB,SAAAxB,GACZzF,EAAK0F,cAAgBD,EAAEzD,OAAShC,EAAK0F,aAAa1D,OACpDhC,EAAK0F,aAAahB,YAAa,IAhKlBvE,KAoKjB+G,cAAgB,SAAAzB,GACVzF,EAAK0F,cAAgBD,EAAEzD,OAAShC,EAAK0F,aAAa1D,MACpDhC,EAAKiG,mBArKP9F,KAAKuG,MAAQnB,EACbA,EAAIpD,MAAQmD,EAAgBuB,YAC5BtB,EAAI/E,OAAS8E,EAAgBwB,aAE7B3G,KAAKgH,QAAUd,QAAMe,OAAO,CAC1BC,OAAQ,CACNC,IAAK,CACHxF,EAAG,EAAGC,EAAG,GAEXwF,IAAK,CACHzF,EAAGwD,EAAgBuB,YACnB9E,EAAGuD,EAAgBkC,gBAKzBrH,KAAKoG,SAAWkB,SAAOL,OAAO,CAC5BZ,MAAOrG,KAAKgH,UAcdhH,KAAKuH,QAAUC,QAAMP,OAAOjH,KAAKuG,OACjCvG,KAAKyH,kBAAoBC,kBAAgBT,OAAOjH,KAAKoG,SAAU,CAC7DX,MAAOzF,KAAKuH,QACZI,WAAY,CACVC,UAAW,GACX1G,OAAQ,CACJ2G,SAAS,MAKjB3B,QAAMC,IAAInG,KAAKoG,SAASC,MAAOrG,KAAKyH,mBAEpCzH,KAAKoG,SAASC,MAAMyB,QAAQlG,EAAI,EAEhC5B,KAAK2F,SAAW,GAChB3F,KAAK+H,SAAW,KAChB/H,KAAKgI,gBAAkB,KACvBhI,KAAKiI,eACLjI,KAAKkI,eACLlI,KAAK8F,kBA5DT,IAAAvD,EAAA4C,EAAA3C,UAAA,OAAAD,EAmEE4F,eAAA,SAAeC,GACb,IAAMC,EAAUD,EAAO5B,WAAW,MAO5B9B,GANiBpE,OAAOgI,kBAAoB,IACxBD,EAAQE,8BACVF,EAAQG,2BACRH,EAAQI,0BACRJ,EAAQK,yBACRL,EAAQM,wBAA0B,GAGpDC,EAAWR,EAAOpG,MAClB6G,EAAYT,EAAO/H,OACzB+H,EAAOpG,MAAQ4G,EAAWlE,EAC1B0D,EAAO/H,OAASwI,EAAYnE,EAC5B0D,EAAOhI,MAAM4B,MAAQ4G,EAAW,KAChCR,EAAOhI,MAAMC,OAASwI,EAAY,KAClCR,EAAQjE,MAAqB,EAAfpE,KAAK8I,QAA4B,EAAf9I,KAAK8I,SACrC9I,KAAK8I,QAAUpE,GApFnBnC,EAuFE0F,aAAA,WACEjI,KAAK+H,SAAW,IAAIrE,EAClB,IAAK,IACLyB,EAAgBuB,YAAa,IAE/B1G,KAAK2F,SAASC,KAAK5F,KAAK+H,WA5F5BxF,EAgGE2F,aAAA,WAIE,IAJa,IAAAa,EAAA/I,KAIJgJ,EAAI,EAAGA,EAAI,EAAGA,IAErB,IADA,IAAMC,EAAQ,EAAID,EACTE,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC9B,IAAMC,EAAO,IAAIzH,EANN,IAMyBA,EAAUM,OAASkH,EAAIF,EAAE,GALlD,IAK+DtH,EAAUrB,OAAS2I,GAC7FhJ,KAAK2F,SAASC,KAAKuD,GAIvB,IAAMC,EAAa,IAAIpE,EAAW,IAAK,KACvChF,KAAK2F,SAASC,KAAKwD,GAEnBpJ,KAAK2F,SAASiB,QAAQ,SAAAC,GACpBX,QAAMC,IAAI4C,EAAK3C,SAASC,MAAOQ,EAAMhF,SAhH3CU,EAoHE8G,KAAA,WAGEC,SAAOC,GAAGvJ,KAAKoG,SAAU,cAAepG,KAAKsG,mBAC7CgD,SAAOC,GAAGvJ,KAAKyH,kBAAmB,YAAazH,KAAKqF,iBACpDiE,SAAOC,GAAGvJ,KAAKyH,kBAAmB,UAAWzH,KAAK+F,eAClDuD,SAAOC,GAAGvJ,KAAKyH,kBAAmB,YAAazH,KAAK8G,iBACpDwC,SAAOC,GAAGvJ,KAAKyH,kBAAmB,UAAWzH,KAAK+G,eAClDO,SAAOkC,IAAIxJ,KAAKoG,WA5HpB7D,EAkLEuD,gBAAA,WAAkB,IAAA2D,EAAAzJ,KACZA,KAAKuF,eACPvF,KAAKuF,aAAapC,UAClB+C,QAAMwD,OAAO1J,KAAKoG,SAASC,MAAOrG,KAAKuF,aAAa1D,MACpD7B,KAAK2F,SAAW3F,KAAK2F,SAASgE,OAAO,SAAA9C,GAAK,OAAIA,IAAU4C,EAAKlE,gBAG/DvF,KAAKuF,aAAe,IAAIpB,EAAW,IAAK,IACxC+B,QAAMC,IAAInG,KAAKoG,SAASC,MAAOrG,KAAKuF,aAAa1D,MACjD7B,KAAK2F,SAAW,CAAC3F,KAAKuF,cAAcqE,OAAO5J,KAAK2F,WA3LpDpD,EA+MEY,QAAA,WAEEmE,SAAOuC,MAAM7J,KAAKoG,UAClBpG,KAAK2F,SAASiB,QAAQ,SAAAC,GACpB,IACEA,EAAM1D,UACN,MAAO2G,GACP9D,QAAQ+D,MAAMD,OAtNtB3E,EAAA,GAAaA,EAEJuB,YAAc,IAFVvB,EAGJwB,aAAe,ICJxB,IAAMqD,EAAYC,IAAOC,IAAVC,WAAA,CAAAC,YAAA,mBAAAC,YAAA,gBAAGJ,CAAH,6DCHAK,cDWb,SAAAA,EAAY1K,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAaFuK,UAAY,WACV1K,EAAK2K,kBAAkBrK,QAAQC,MAAM4B,MAAQ1B,OAAOmK,WAAa,KACjE5K,EAAK2K,kBAAkBrK,QAAQC,MAAMC,OAASC,OAAOC,YAAc,MAhBlDV,EAmBnB6K,kBAAoBjK,YAASZ,EAAK0K,UAAW,IAAK,CAChD7J,SAAS,IAlBTb,EAAK2K,kBAAoB7J,IAAMC,YAC/Bf,EAAK8K,UAAYhK,IAAMC,YACvBf,EAAK+K,WAAa,KAJD/K,sCAOnBiB,kBAAA,WACEd,KAAK4K,WAAa,IAAIzF,EAAgBnF,KAAK2K,UAAUxK,SACrDH,KAAKuK,YACLvK,KAAK4K,WAAWvB,OAChB/I,OAAOS,iBAAiB,SAAUf,KAAK0K,sBAYzC1J,qBAAA,WACEV,OAAOW,oBAAoB,SAAUjB,KAAK0K,mBAEtC1K,KAAK4K,aACP5K,KAAK4K,WAAWzH,UAChBnD,KAAK4K,WAAa,SAItB1J,OAAA,WACE,OACEC,EAAAC,EAAAC,cAAC2I,EAAD,CACE1I,IAAKtB,KAAKwK,kBACVjJ,UAAU,eAEVJ,EAAAC,EAAAC,cAAA,UAAQC,IAAKtB,KAAK2K,iBAxCNlJ,yKENpB,IAAMoJ,EAAaC,YAAHC,KAyBDC,UAfM,WACnB,OACE7J,EAAAC,EAAAC,cAAC4J,EAAA,SAAD,KACE9J,EAAAC,EAAAC,cAACwJ,EAAD,MACA1J,EAAAC,EAAAC,cAAC6J,EAAD,2BAGA/J,EAAAC,EAAAC,cAAC6J,EAAD,KAEE/J,EAAAC,EAAAC,cAAC8J,EAAD","file":"component---src-pages-what-am-i-doing-js-2fdad8bbd4a0ee452c4a.js","sourcesContent":["import React, { Component } from 'react';\nimport { debounce } from 'lodash-es';\n\nclass FullPage extends Component {\n\n  constructor(props) {\n    super(props);\n    this.containerRef = React.createRef();\n    if (typeof window !== 'undefined') {\n      this.pageHeight = window.innerHeight;\n    }\n  }\n\n  resetHeight = () => {\n    this.containerRef.current.style.height = window.innerHeight + 'px';\n  }\n\n  debounceResetHeight = debounce(this.resetHeight, 200, {\n    leading: true,\n  });\n\n  componentDidMount() {\n    window.addEventListener('resize', this.debounceResetHeight)\n    this.resetHeight();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debounceResetHeight);\n  }\n\n  render() {\n    return (\n      <div ref={this.containerRef} className=\"full-page\">\n        {this.props.children}\n      </div>\n    );\n  }\n\n}\n\nexport default FullPage;\n","import { Bodies, Body } from 'matter-js';\n\nexport class BrickAtom {\n\n  static width = 42;\n  static height = 24;\n\n  /**\n   * @param {number} x \n   * @param {number} y \n   */\n  constructor(x, y) {\n    this.body = Bodies.rectangle(\n      x,\n      y,\n      BrickAtom.width,\n      BrickAtom.height,\n      {\n        density: 10,\n        frictionAir: 0.035,\n        friction: 0.1,\n      },\n    );\n    this.__img = new Image();\n    this.__img.src = '/images/brick.png';\n  }\n\n  get position() {\n    return this.body.position;\n  }\n\n  set position({ x, y }) {\n    Body.set(this.body, {\n      position: { x, y },\n    });\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position, angle } = this.body;\n    ctx.save();\n    ctx.translate(position.x, position.y);\n    ctx.rotate(angle);\n    ctx.drawImage(\n      this.__img,\n      -1 * BrickAtom.width / 2,\n      -1 * BrickAtom.height / 2,\n      BrickAtom.width,\n      BrickAtom.height,\n    );\n    ctx.restore();\n  }\n\n  dispose() {\n  }\n\n}\n","import { Bodies } from 'matter-js';\n\nexport class Ground {\n\n  /**\n   * \n   * @param {number} x \n   * @param {number} y \n   * @param {number} width\n   * @param {number} height\n   */\n  constructor(x, y, width, height) {\n    this.__width = width;\n    this.__height = height;\n    this.body = Bodies.rectangle(\n      x, y,\n      width, height,\n      {\n        isStatic: true,\n        friction: 0.99,\n        frictionStatic: 0.99,\n      },\n    );\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position: { x, y } } = this.body;\n    ctx.save();\n    ctx.fillStyle = \"black\";\n    ctx.translate(x, y);\n    ctx.fillRect(-0.5 * this.__width, -this.__height * 0.5, this.__width, this.__height);\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Bodies, Body } from 'matter-js';\nimport decomp from 'poly-decomp';\n\nif (typeof window !== 'undefined') {\n  window.decomp = decomp;\n}\n\nexport class LargeBrick {\n\n  static Width = 512;\n  static Height = 512;\n  static EndX = 680;\n\n  /**\n   * \n   * @param {number} x \n   * @param {number} y \n   * @param {number} scale\n   */\n  constructor(x, y, scale = 0.5) {\n    this.body = Bodies.fromVertices(\n      x,\n      y,\n      [\n        { x: 306, y: 8.5 },\n        { x: 500, y: 75 },\n        { x: 505.5, y: 162.5 },\n        { x: 265.5, y: 500.5 },\n        { x: 14, y: 304 },\n        { x: 14, y: 240 },\n        { x: 306, y: 8.5 },\n      ],\n      {\n        density: 200,\n        frictionAir: 0.035,\n        friction: 0.78,\n      },\n    );\n    this.__originalScale = scale;\n    this.scale = scale;\n    this.__img = new Image();\n    this.__img.src = '/images/large-brick-rect.png';\n    this.isDragging = false;\n  }\n\n  get scale() {\n    return this.__scale;\n  }\n\n  set scale(value) {\n    this.__scale = value;\n    Body.scale(this.body, value, value);\n  }\n\n  update() {\n    const { position: { x } } = this.body;\n    if (x >= 200 && x < LargeBrick.EndX) {\n      const ratio = (LargeBrick.EndX - x) / (LargeBrick.EndX - 200);\n      // this.scale = this.__originalScale * ratio;\n      this.__scale = this.__originalScale * ratio;\n      // Body.scale(this.body, ratio / this.__originalScale, ratio / this.__originalScale);\n      // this.__originalScale = this.__originalScale * ratio;\n    } else {\n      // this.scale = this.__originalScale;\n    }\n      // this.scale = this.__originalScale;\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    const { position, angle } = this.body;\n    ctx.save();\n    ctx.translate(position.x, position.y);\n    ctx.rotate(angle);\n    ctx.drawImage(\n      this.__img,\n      // 0, 0,\n      -1 * LargeBrick.Width / 2 * this.__scale,\n      -1 * LargeBrick.Height / 2 * this.__scale,\n      LargeBrick.Width * this.__scale,\n      LargeBrick.Height * this.__scale,\n    );\n    ctx.fillStyle =\"black\";\n    ctx.fillText(\n      `x: ${position.x} y: ${position.y}`,\n      -1 * LargeBrick.Width / 2 * this.__scale,\n      -1 * LargeBrick.Height / 2 * this.__scale,\n    )\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Bodies } from 'matter-js';\n\nexport class ManOutline {\n\n  static Width = 156;\n  static Height = 156;\n\n  constructor(x, y) {\n    this.__x = x;\n    this.__y = y;\n\n    this.body = Bodies.fromVertices(\n      x, y,\n      [\n        { x: 31.5, y: 34.5 },\n        { x: 81.5, y: 88 },\n        { x: 126.5, y: 47.5 },\n        { x: 97.5, y: 103.5 },\n        { x: 56.5, y: 103.5 }\n      ],\n      { isStatic: true },\n    )\n\n    this.__img = new Image();\n    this.__img.src = '/images/MAN.png';\n  }\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx \n   */\n  draw(ctx) {\n    ctx.save(0);\n    ctx.translate(this.__x, this.__y);\n    ctx.drawImage(\n      this.__img,\n      -1 * ManOutline.Width / 2 + 5,\n      -1 * ManOutline.Height / 2 - 10 ,\n      ManOutline.Width,\n      ManOutline.Height,\n    );\n    ctx.restore();\n  }\n\n  dispose() {\n\n  }\n\n}\n","import { Engine, World, Mouse, MouseConstraint, Events } from 'matter-js';\nimport { BrickAtom } from './brickAtom';\nimport { Ground } from './ground';\nimport { LargeBrick } from './largeBrick';\nimport { ManOutline } from './manOutline';\n\nexport class BrickController {\n\n  static CanvasWidth = 920;\n  static CanvasHeight = 480;\n\n  /**\n   * @param {HTMLCanvasElement} dom \n   */\n  constructor(dom) {\n    this.__dom = dom;\n    dom.width = BrickController.CanvasWidth;\n    dom.height = BrickController.CanvasHeight;\n    // this.setCanvasRatio(dom);\n    this.__world = World.create({\n      bounds: {\n        min: {\n          x: 0, y: 0,\n        },\n        max: {\n          x: BrickController.CanvasWidth,\n          y: BrickController.CanvasHeigh,\n        },\n      }\n    });\n\n    this.__engine = Engine.create({\n      world: this.__world,\n    });\n\n    // this.__render = Render.create({\n    //   canvas: this.__dom,\n    //   engine: this.__engine,\n    //   options: {\n    //     width: BrickController.CanvasWidth,\n    //     height: BrickController.CanvasHeight,\n    //     // showAxes: true,\n    //     // showAngleIndicator:true\n    //   },\n    // });\n\n    this.__mouse = Mouse.create(this.__dom);\n    this.__mouseConstraint = MouseConstraint.create(this.__engine, {\n      mouse: this.__mouse,\n      constraint: {\n        stiffness: 0.2,\n        render: {\n            visible: false,\n        },\n      },\n    });\n\n    World.add(this.__engine.world, this.__mouseConstraint);\n\n    this.__engine.world.gravity.y = 1;\n\n    this.__bricks = [];\n    this.__ground = null;\n    this.__lastTimeStamp = null;\n    this.createGround();\n    this.createBodies();\n    this.resetLargeBrick();\n  }\n\n  /**\n   * \n   * @param {HTMLCanvasElement} dom \n   */\n  setCanvasRatio(canvas) {\n    const context = canvas.getContext('2d');\n    var devicePixelRatio = window.devicePixelRatio || 1\n    const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1\n    const ratio = devicePixelRatio / backingStoreRatio;\n\n    const oldWidth = canvas.width;\n    const oldHeight = canvas.height;\n    canvas.width = oldWidth * ratio;\n    canvas.height = oldHeight * ratio;\n    canvas.style.width = oldWidth + 'px';\n    canvas.style.height = oldHeight + 'px';\n    context.scale(this.__ratio * 2, this.__ratio * 2);\n    this.__ratio = ratio;\n  }\n\n  createGround() {\n    this.__ground = new Ground(\n      480, 420,\n      BrickController.CanvasWidth, 10,\n    );\n    this.__bricks.push(this.__ground);\n    // World.add(this.__engine.world, this.__ground.body);\n  }\n\n  createBodies() {\n    const beginX = 620;\n    const beginY = 400;\n\n    for (let i = 0; i < 4; i++) {\n      const count = 5 - i;\n      for (let j = 0; j < count; j++) {\n        const atom = new BrickAtom(beginX + BrickAtom.width * (j + i/2), beginY - BrickAtom.height * i);\n        this.__bricks.push(atom);\n      }\n    }\n\n    const manOutline = new ManOutline(110, 348);\n    this.__bricks.push(manOutline);\n\n    this.__bricks.forEach(brick => {\n      World.add(this.__engine.world, brick.body);\n    });\n  }\n\n  loop() {\n    // window.requestAnimationFrame(this.draw);\n    // Events.on(this.__render, \"afterRender\", this.handleAfterRender);\n    Events.on(this.__engine, \"afterUpdate\", this.handleAfterUpdate);\n    Events.on(this.__mouseConstraint, \"mousemove\", this.handleMouseMove);\n    Events.on(this.__mouseConstraint, \"mouseup\", this.handleMouseUp);\n    Events.on(this.__mouseConstraint, \"startdrag\", this.handleDragStart);\n    Events.on(this.__mouseConstraint, \"enddrag\", this.handleDragEnd);\n    Engine.run(this.__engine);\n    // Render.run(this.__render);\n  }\n\n  handleMouseMove = e => {\n    if (this.__largeBrick && this.__largeBrick.isDragging) {\n      const { position: { x, y } } = e.mouse;\n      if (x > LargeBrick.EndX - 120) {\n        const newBrick = new BrickAtom(x, y);\n        this.__bricks.push(newBrick);\n        this.__tmpBrick = newBrick;\n\n        this.resetLargeBrick();\n      }\n    }\n\n    if (this.__tmpBrick) {\n      const { position } = e.mouse;\n      this.__tmpBrick = position;\n    }\n  }\n\n  handleMouseUp = e => {\n    console.log(e);\n    if (this.__tmpBrick) {\n      World.add(this.__engine.world, this.__tmpBrick.body);\n    }\n  }\n\n  handleAfterUpdate = () => {\n    this.__largeBrick.update();\n\n    /** @type {CanvasRenderingContext2D} */\n    const ctx = this.__dom.getContext('2d');\n\n    ctx.clearRect(0, 0, BrickAtom.width, BrickAtom.height);\n    ctx.fillStyle = \"#FFF3DE\";\n    ctx.fillRect(0, 0, BrickController.CanvasWidth, BrickController.CanvasHeight);\n    // this.__ground.draw(ctx);\n    this.__bricks.forEach(brick => brick.draw(ctx));\n  }\n\n  handleDragStart = e => {\n    if (this.__largeBrick && e.body === this.__largeBrick.body) {\n      this.__largeBrick.isDragging = true;\n    }\n  }\n\n  handleDragEnd = e => {\n    if (this.__largeBrick && e.body === this.__largeBrick.body) {\n      this.resetLargeBrick();\n    }\n  }\n\n  resetLargeBrick() {\n    if (this.__largeBrick) {\n      this.__largeBrick.dispose();\n      World.remove(this.__engine.world, this.__largeBrick.body);\n      this.__bricks = this.__bricks.filter(brick => brick !== this.__largeBrick);\n    }\n\n    this.__largeBrick = new LargeBrick(120, 30);\n    World.add(this.__engine.world, this.__largeBrick.body);\n    this.__bricks = [this.__largeBrick].concat(this.__bricks);\n  }\n\n  // draw = timestamp => {\n  //   if (!this.__lastTimeStamp) {\n  //     this.__lastTimeStamp = timestamp;\n  //   }\n  //   const delta = timestamp - this.__lastTimeStamp;\n  //   this.__lastTimeStamp = timestamp;\n\n  //   // do something\n  //   Engine.update(this.__engine, delta);\n\n  //   const ctx = this.__dom.getContext('2d');\n  //   ctx.clearRect(0, 0, BrickAtom.width, BrickAtom.height);\n  //   this.__bricks.forEach(brick => brick.draw(ctx));\n\n  //   window.requestAnimationFrame(this.draw)\n  // }\n\n  dispose() {\n    // Render.stop(this.__render);\n    Engine.clear(this.__engine);\n    this.__bricks.forEach(brick => {\n      try {\n        brick.dispose();\n      } catch (err) {\n        console.error(err);\n      }\n    });\n    // window.cancelAnimationFrame(this.draw);\n  }\n\n}\n","import React, { Component } from 'react';\nimport { BrickController } from './brickController';\nimport { debounce } from 'lodash-es';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nclass Brick extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.worldContainerRef = React.createRef();\n    this.canvasRef = React.createRef();\n    this.controller = null;\n  }\n\n  componentDidMount() {\n    this.controller = new BrickController(this.canvasRef.current);\n    this.resetSize();\n    this.controller.loop();\n    window.addEventListener('resize', this.debounceResetSize);\n  }\n\n  resetSize = () => {\n    this.worldContainerRef.current.style.width = window.innerWidth + 'px';\n    this.worldContainerRef.current.style.height = window.innerHeight + 'px';\n  }\n\n  debounceResetSize = debounce(this.resetSize, 200, {\n    leading: true,\n  });\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debounceResetSize);\n    \n    if (this.controller) {\n      this.controller.dispose();\n      this.controller = null;\n    }\n  }\n\n  render() {\n    return (\n      <Container\n        ref={this.worldContainerRef}\n        className=\"brick-world\"\n      >\n        <canvas ref={this.canvasRef} />\n      </Container>\n    );\n  }\n\n}\n\nexport default Brick;\n","import Brick from './brick';\n\nexport default Brick;\n","import React, { Fragment } from 'react';\nimport { createGlobalStyle } from 'styled-components';\nimport FullPage from '../components/fullPage';\nimport Brick from '../components/brick';\n\nconst Background = createGlobalStyle`\n  body {\n    background-color: #FFF3DE;\n  }\n\n  .full-page {\n    overflow: hidden;\n  }\n`;\n\nconst WhatAmIDoing = () => {\n  return (\n    <Fragment>\n      <Background />\n      <FullPage>\n        Chen Duzhong 在做什么？\n      </FullPage>\n      <FullPage>\n        {/* 帮中少搬砖，获得神秘礼品🎁！ */}\n        <Brick />\n      </FullPage>\n    </Fragment>\n  )\n};\n\nexport default WhatAmIDoing;\n"],"sourceRoot":""}