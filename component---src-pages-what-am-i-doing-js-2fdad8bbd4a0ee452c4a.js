(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{151:function(t,e,i){"use strict";i.r(e);var n=i(195),r=i.n(n),s=i(0),o=i.n(s),a=i(154),h=i(8),c=i.n(h),_=i(199),d=function(t){function e(e){var i;return(i=t.call(this,e)||this).resetHeight=function(){i.containerRef.current.style.height=window.innerHeight+"px"},i.debounceResetHeight=Object(_.a)(i.resetHeight,200,{leading:!0}),i.containerRef=o.a.createRef(),"undefined"!=typeof window&&(i.pageHeight=window.innerHeight),i}c()(e,t);var i=e.prototype;return i.componentDidMount=function(){window.addEventListener("resize",this.debounceResetHeight),this.resetHeight()},i.componentWillUnmount=function(){window.removeEventListener("resize",this.debounceResetHeight)},i.render=function(){return o.a.createElement("div",{ref:this.containerRef,className:"full-page"},this.props.children)},e}(s.Component),l=(i(77),i(161)),u=i(171),g=i.n(u),f=function(){function t(e,i){this.body=l.Bodies.rectangle(e,i,t.width,t.height,{density:10,frictionAir:.035,friction:.1}),this.__img=new Image,this.__img.src="/images/brick.png"}var e=t.prototype;return e.draw=function(e){var i=this.body,n=i.position,r=i.angle;e.save(),e.translate(n.x,n.y),e.rotate(r),e.drawImage(this.__img,-1*t.width/2,-1*t.height/2,t.width,t.height),e.restore()},e.dispose=function(){},g()(t,[{key:"position",get:function(){return this.body.position},set:function(t){var e=t.x,i=t.y;l.Body.set(this.body,{position:{x:e,y:i}})}}]),t}();f.width=42,f.height=24;var p=function(){function t(t,e,i,n){this.__width=i,this.__height=n,this.body=l.Bodies.rectangle(t,e,i,n,{isStatic:!0,friction:.99,frictionStatic:.99})}var e=t.prototype;return e.draw=function(t){var e=this.body.position,i=e.x,n=e.y;t.save(),t.fillStyle="black",t.translate(i,n),t.fillRect(-.5*this.__width,.5*-this.__height,this.__width,this.__height),t.restore()},e.dispose=function(){},t}(),w=i(197),m=i.n(w);"undefined"!=typeof window&&(window.decomp=m.a);var v=function(){function t(t,e,i){void 0===i&&(i=.5),this.body=l.Bodies.fromVertices(t,e,[{x:306,y:8.5},{x:500,y:75},{x:505.5,y:162.5},{x:265.5,y:500.5},{x:14,y:304},{x:14,y:240},{x:306,y:8.5}],{density:200,frictionAir:.035,friction:.78}),this.__originalScale=i,this.scale=i,this.__img=new Image,this.__img.src="/images/large-brick-rect.png",this.isDragging=!1}var e=t.prototype;return e.update=function(){var e=this.body.position.x;if(e>=200&&e<t.EndX){var i=(t.EndX-e)/(t.EndX-200);this.__scale=this.__originalScale*i}},e.draw=function(e){var i=this.body,n=i.position,r=i.angle;e.save(),e.translate(n.x,n.y),e.rotate(r),e.drawImage(this.__img,-1*t.Width/2*this.__scale,-1*t.Height/2*this.__scale,t.Width*this.__scale,t.Height*this.__scale),e.fillStyle="black",e.fillText("x: "+n.x+" y: "+n.y,-1*t.Width/2*this.__scale,-1*t.Height/2*this.__scale),e.restore()},e.dispose=function(){},g()(t,[{key:"scale",get:function(){return this.__scale},set:function(t){this.__scale=t,l.Body.scale(this.body,t,t)}}]),t}();v.Width=512,v.Height=512,v.EndX=680;var y=function(){function t(t,e){this.__x=t,this.__y=e,this.body=l.Bodies.fromVertices(t,e,[{x:31.5,y:34.5},{x:81.5,y:88},{x:126.5,y:47.5},{x:97.5,y:103.5},{x:56.5,y:103.5}],{isStatic:!0}),this.__img=new Image,this.__img.src="/images/MAN.png"}var e=t.prototype;return e.draw=function(e){e.save(0),e.translate(this.__x,this.__y),e.drawImage(this.__img,-1*t.Width/2+5,-1*t.Height/2-10,t.Width,t.Height),e.restore()},e.dispose=function(){},t}();y.Width=156,y.Height=156;var b=function(){function t(e){var i=this;this.handleMouseMove=function(t){if(i.__largeBrick&&i.__largeBrick.isDragging){var e=t.mouse.position,n=e.x,r=e.y;if(n>v.EndX-120){var s=new f(n,r);i.__bricks.push(s),i.__tmpBrick=s,i.resetLargeBrick()}}if(i.__tmpBrick){var o=t.mouse.position;i.__tmpBrick=o}},this.handleMouseUp=function(t){console.log(t),i.__tmpBrick&&l.World.add(i.__engine.world,i.__tmpBrick.body)},this.handleAfterUpdate=function(){i.__largeBrick.update();var e=i.__dom.getContext("2d");e.clearRect(0,0,f.width,f.height),e.fillStyle="#FFF3DE",e.fillRect(0,0,t.CanvasWidth,t.CanvasHeight),i.__bricks.forEach(function(t){return t.draw(e)})},this.handleDragStart=function(t){i.__largeBrick&&t.body===i.__largeBrick.body&&(i.__largeBrick.isDragging=!0)},this.handleDragEnd=function(t){i.__largeBrick&&t.body===i.__largeBrick.body&&i.resetLargeBrick()},this.__dom=e,e.width=t.CanvasWidth,e.height=t.CanvasHeight,this.__world=l.World.create({bounds:{min:{x:0,y:0},max:{x:t.CanvasWidth,y:t.CanvasHeigh}}}),this.__engine=l.Engine.create({world:this.__world}),this.__mouse=l.Mouse.create(this.__dom),this.__mouseConstraint=l.MouseConstraint.create(this.__engine,{mouse:this.__mouse,constraint:{stiffness:.2,render:{visible:!1}}}),l.World.add(this.__engine.world,this.__mouseConstraint),this.__engine.world.gravity.y=1,this.__bricks=[],this.__ground=null,this.__lastTimeStamp=null,this.createGround(),this.createBodies(),this.resetLargeBrick()}var e=t.prototype;return e.setCanvasRatio=function(t){var e=t.getContext("2d"),i=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),n=t.width,r=t.height;t.width=n*i,t.height=r*i,t.style.width=n+"px",t.style.height=r+"px",e.scale(2*this.__ratio,2*this.__ratio),this.__ratio=i},e.createGround=function(){this.__ground=new p(480,420,t.CanvasWidth,10),this.__bricks.push(this.__ground)},e.createBodies=function(){for(var t=this,e=0;e<4;e++)for(var i=5-e,n=0;n<i;n++){var r=new f(620+f.width*(n+e/2),400-f.height*e);this.__bricks.push(r)}var s=new y(110,348);this.__bricks.push(s),this.__bricks.forEach(function(e){l.World.add(t.__engine.world,e.body)})},e.loop=function(){l.Events.on(this.__engine,"afterUpdate",this.handleAfterUpdate),l.Events.on(this.__mouseConstraint,"mousemove",this.handleMouseMove),l.Events.on(this.__mouseConstraint,"mouseup",this.handleMouseUp),l.Events.on(this.__mouseConstraint,"startdrag",this.handleDragStart),l.Events.on(this.__mouseConstraint,"enddrag",this.handleDragEnd),l.Engine.run(this.__engine)},e.resetLargeBrick=function(){var t=this;this.__largeBrick&&(this.__largeBrick.dispose(),l.World.remove(this.__engine.world,this.__largeBrick.body),this.__bricks=this.__bricks.filter(function(e){return e!==t.__largeBrick})),this.__largeBrick=new v(120,30),l.World.add(this.__engine.world,this.__largeBrick.body),this.__bricks=[this.__largeBrick].concat(this.__bricks)},e.dispose=function(){l.Engine.clear(this.__engine),this.__bricks.forEach(function(t){try{t.dispose()}catch(e){console.error(e)}})},t}();b.CanvasWidth=920,b.CanvasHeight=480;var k=a.b.div.withConfig({displayName:"brick__Container",componentId:"sc-1dcdm0m-0"})(["display:flex;align-items:center;justify-content:center;"]),x=function(t){function e(e){var i;return(i=t.call(this,e)||this).resetSize=function(){i.worldContainerRef.current.style.width=window.innerWidth+"px",i.worldContainerRef.current.style.height=window.innerHeight+"px"},i.debounceResetSize=Object(_.a)(i.resetSize,200,{leading:!0}),i.worldContainerRef=o.a.createRef(),i.canvasRef=o.a.createRef(),i.controller=null,i}c()(e,t);var i=e.prototype;return i.componentDidMount=function(){this.controller=new b(this.canvasRef.current),this.resetSize(),this.controller.loop(),window.addEventListener("resize",this.debounceResetSize)},i.componentWillUnmount=function(){window.removeEventListener("resize",this.debounceResetSize),this.controller&&(this.controller.dispose(),this.controller=null)},i.render=function(){return o.a.createElement(k,{ref:this.worldContainerRef,className:"brick-world"},o.a.createElement("canvas",{ref:this.canvasRef}))},e}(s.Component);function B(){var t=r()(["\n  body {\n    background-color: #FFF3DE;\n  }\n\n  .full-page {\n    overflow: hidden;\n  }\n"]);return B=function(){return t},t}var E=Object(a.a)(B());e.default=function(){return o.a.createElement(s.Fragment,null,o.a.createElement(E,null),o.a.createElement(d,null,"Chen Duzhong 在做什么？"),o.a.createElement(d,null,o.a.createElement(x,null)))}}}]);
//# sourceMappingURL=component---src-pages-what-am-i-doing-js-2fdad8bbd4a0ee452c4a.js.map